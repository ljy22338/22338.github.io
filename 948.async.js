!(function(){"use strict";var vs=Object.defineProperty,ys=Object.defineProperties;var ws=Object.getOwnPropertyDescriptors;var Qr=Object.getOwnPropertySymbols,Cs=Object.getPrototypeOf,hs=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,Ss=Reflect.get;var os=(ye,we)=>(we=Symbol[ye])?we:Symbol.for("Symbol."+ye);var fs=(ye,we,w)=>we in ye?vs(ye,we,{enumerable:!0,configurable:!0,writable:!0,value:w}):ye[we]=w,g=(ye,we)=>{for(var w in we||(we={}))hs.call(we,w)&&fs(ye,w,we[w]);if(Qr)for(var w of Qr(we))ms.call(we,w)&&fs(ye,w,we[w]);return ye},S=(ye,we)=>ys(ye,ws(we));var ot=(ye,we)=>{var w={};for(var p in ye)hs.call(ye,p)&&we.indexOf(p)<0&&(w[p]=ye[p]);if(ye!=null&&Qr)for(var p of Qr(ye))we.indexOf(p)<0&&ms.call(ye,p)&&(w[p]=ye[p]);return w};var ls=(ye,we,w)=>Ss(Cs(ye),w,we);var G=(ye,we,w)=>new Promise((p,Oe)=>{var b=ue=>{try{Ce(w.next(ue))}catch(Xe){Oe(Xe)}},Te=ue=>{try{Ce(w.throw(ue))}catch(Xe){Oe(Xe)}},Ce=ue=>ue.done?p(ue.value):Promise.resolve(ue.value).then(b,Te);Ce((w=w.apply(ye,we)).next())}),st=function(ye,we){this[0]=ye,this[1]=we},nn=(ye,we,w)=>{var p=(Te,Ce,ue,Xe)=>{try{var Tt=w[Te](Ce),vt=(Ce=Tt.value)instanceof st,Ue=Tt.done;Promise.resolve(vt?Ce[0]:Ce).then(et=>vt?p(Te==="return"?Te:"next",Ce[1]?{done:et.done,value:et.value}:et,ue,Xe):ue({value:et,done:Ue})).catch(et=>p("throw",et,ue,Xe))}catch(et){Xe(et)}},Oe=Te=>b[Te]=Ce=>new Promise((ue,Xe)=>p(Te,Ce,ue,Xe)),b={};return w=w.apply(ye,we),b[os("asyncIterator")]=()=>b,Oe("next"),Oe("throw"),Oe("return"),b};var mt=(ye,we,w)=>(we=ye[os("asyncIterator")])?we.call(ye):(ye=ye[os("iterator")](),we={},w=(p,Oe)=>(Oe=ye[p])&&(we[p]=b=>new Promise((Te,Ce,ue)=>(b=Oe.call(ye,b),ue=b.done,Promise.resolve(b.value).then(Xe=>Te({value:Xe,done:ue}),Ce)))),w("next"),w("return"),we);(self.webpackChunk=self.webpackChunk||[]).push([[948],{80794:function(ye,we,w){w.d(we,{Z:function(){return kt}});var p=w(65223),Oe=w(74902),b=w(62435),Te=w(93967),Ce=w.n(Te),ue=w(82225),Xe=w(33603),Tt=w(35792);function vt(o){const[c,h]=b.useState(o);return b.useEffect(()=>{const f=setTimeout(()=>{h(o)},o.length?0:10);return()=>{clearTimeout(f)}},[o]),c}var Ue=w(54548),et=w(14747),rn=w(50438),Yn=w(33507),Lt=w(45503),_t=w(92030),yr=o=>{const{componentCls:c}=o,h=`${c}-show-help`,f=`${c}-show-help-item`;return{[h]:{transition:`opacity ${o.motionDurationSlow} ${o.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[f]:{overflow:"hidden",transition:`height ${o.motionDurationSlow} ${o.motionEaseInOut},
                     opacity ${o.motionDurationSlow} ${o.motionEaseInOut},
                     transform ${o.motionDurationSlow} ${o.motionEaseInOut} !important`,[`&${f}-appear, &${f}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${f}-leave-active`]:{transform:"translateY(-5px)"}}}}};const er=o=>({legend:{display:"block",width:"100%",marginBottom:o.marginLG,padding:0,color:o.colorTextDescription,fontSize:o.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${(0,Ue.bf)(o.lineWidth)} ${o.lineType} ${o.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${(0,Ue.bf)(o.controlOutlineWidth)} ${o.controlOutline}`},output:{display:"block",paddingTop:15,color:o.colorText,fontSize:o.fontSize,lineHeight:o.lineHeight}}),tr=(o,c)=>{const{formItemCls:h}=o;return{[h]:{[`${h}-label > label`]:{height:c},[`${h}-control-input`]:{minHeight:c}}}},ge=o=>{const{componentCls:c}=o;return{[o.componentCls]:Object.assign(Object.assign(Object.assign({},(0,et.Wf)(o)),er(o)),{[`${c}-text`]:{display:"inline-block",paddingInlineEnd:o.paddingSM},"&-small":Object.assign({},tr(o,o.controlHeightSM)),"&-large":Object.assign({},tr(o,o.controlHeightLG))})}},Le=o=>{const{formItemCls:c,iconCls:h,componentCls:f,rootPrefixCls:v,antCls:n,labelRequiredMarkColor:i,labelColor:u,labelFontSize:d,labelHeight:m,labelColonMarginInlineStart:E,labelColonMarginInlineEnd:x,itemMarginBottom:R}=o;return{[c]:Object.assign(Object.assign({},(0,et.Wf)(o)),{marginBottom:R,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${n}-row`]:{display:"none"},"&-has-warning":{[`${c}-split`]:{color:o.colorError}},"&-has-error":{[`${c}-split`]:{color:o.colorWarning}},[`${c}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:o.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:m,color:u,fontSize:d,[`> ${h}`]:{fontSize:o.fontSize,verticalAlign:"top"},[`&${c}-required:not(${c}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:o.marginXXS,color:i,fontSize:o.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${f}-hide-required-mark &`]:{display:"none"}},[`${c}-optional`]:{display:"inline-block",marginInlineStart:o.marginXXS,color:o.colorTextDescription,[`${f}-hide-required-mark &`]:{display:"none"}},[`${c}-tooltip`]:{color:o.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:o.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:E,marginInlineEnd:x},[`&${c}-no-colon::after`]:{content:'"\\a0"'}}},[`${c}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${v}-col-'"]):not([class*="' ${v}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:o.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[c]:{"&-explain, &-extra":{clear:"both",color:o.colorTextDescription,fontSize:o.fontSize,lineHeight:o.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:o.controlHeightSM,transition:`color ${o.motionDurationMid} ${o.motionEaseOut}`},"&-explain":{"&-error":{color:o.colorError},"&-warning":{color:o.colorWarning}}},[`&-with-help ${c}-explain`]:{height:"auto",opacity:1},[`${c}-feedback-icon`]:{fontSize:o.fontSize,textAlign:"center",visibility:"visible",animationName:rn.kr,animationDuration:o.motionDurationMid,animationTimingFunction:o.motionEaseOutBack,pointerEvents:"none","&-success":{color:o.colorSuccess},"&-error":{color:o.colorError},"&-warning":{color:o.colorWarning},"&-validating":{color:o.colorPrimary}}})}},Ge=(o,c)=>{const{formItemCls:h}=o;return{[`${c}-horizontal`]:{[`${h}-label`]:{flexGrow:0},[`${h}-control`]:{flex:"1 1 0",minWidth:0},[`${h}-label[class$='-24'], ${h}-label[class*='-24 ']`]:{[`& + ${h}-control`]:{minWidth:"unset"}}}}},Wt=o=>{const{componentCls:c,formItemCls:h,inlineItemMarginBottom:f}=o;return{[`${c}-inline`]:{display:"flex",flexWrap:"wrap",[h]:{flex:"none",marginInlineEnd:o.margin,marginBottom:f,"&-row":{flexWrap:"nowrap"},[`> ${h}-label,
        > ${h}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${h}-label`]:{flex:"none"},[`${c}-text`]:{display:"inline-block"},[`${h}-has-feedback`]:{display:"inline-block"}}}}},Ye=o=>({padding:o.verticalLabelPadding,margin:o.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),sn=o=>{const{componentCls:c,formItemCls:h,rootPrefixCls:f}=o;return{[`${h} ${h}-label`]:Ye(o),[`${c}:not(${c}-inline)`]:{[h]:{flexWrap:"wrap",[`${h}-label, ${h}-control`]:{[`&:not([class*=" ${f}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},zn=o=>{const{componentCls:c,formItemCls:h,antCls:f}=o;return{[`${c}-vertical`]:{[`${h}:not(${h}-horizontal)`]:{[`${h}-row`]:{flexDirection:"column"},[`${h}-label > label`]:{height:"auto"},[`${h}-control`]:{width:"100%"},[`${h}-label,
        ${f}-col-24${h}-label,
        ${f}-col-xl-24${h}-label`]:Ye(o)}},[`@media (max-width: ${(0,Ue.bf)(o.screenXSMax)})`]:[sn(o),{[c]:{[`${h}:not(${h}-horizontal)`]:{[`${f}-col-xs-24${h}-label`]:Ye(o)}}}],[`@media (max-width: ${(0,Ue.bf)(o.screenSMMax)})`]:{[c]:{[`${h}:not(${h}-horizontal)`]:{[`${f}-col-sm-24${h}-label`]:Ye(o)}}},[`@media (max-width: ${(0,Ue.bf)(o.screenMDMax)})`]:{[c]:{[`${h}:not(${h}-horizontal)`]:{[`${f}-col-md-24${h}-label`]:Ye(o)}}},[`@media (max-width: ${(0,Ue.bf)(o.screenLGMax)})`]:{[c]:{[`${h}:not(${h}-horizontal)`]:{[`${f}-col-lg-24${h}-label`]:Ye(o)}}}}},nr=o=>{const{formItemCls:c,antCls:h}=o;return{[`${c}-vertical`]:{[`${c}-row`]:{flexDirection:"column"},[`${c}-label > label`]:{height:"auto"},[`${c}-control`]:{width:"100%"}},[`${c}-vertical ${c}-label,
      ${h}-col-24${c}-label,
      ${h}-col-xl-24${c}-label`]:Ye(o),[`@media (max-width: ${(0,Ue.bf)(o.screenXSMax)})`]:[sn(o),{[c]:{[`${h}-col-xs-24${c}-label`]:Ye(o)}}],[`@media (max-width: ${(0,Ue.bf)(o.screenSMMax)})`]:{[c]:{[`${h}-col-sm-24${c}-label`]:Ye(o)}},[`@media (max-width: ${(0,Ue.bf)(o.screenMDMax)})`]:{[c]:{[`${h}-col-md-24${c}-label`]:Ye(o)}},[`@media (max-width: ${(0,Ue.bf)(o.screenLGMax)})`]:{[c]:{[`${h}-col-lg-24${c}-label`]:Ye(o)}}}},an=o=>({labelRequiredMarkColor:o.colorError,labelColor:o.colorTextHeading,labelFontSize:o.fontSize,labelHeight:o.controlHeight,labelColonMarginInlineStart:o.marginXXS/2,labelColonMarginInlineEnd:o.marginXS,itemMarginBottom:o.marginLG,verticalLabelPadding:`0 0 ${o.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),Dt=(o,c)=>(0,Lt.TS)(o,{formItemCls:`${o.componentCls}-item`,rootPrefixCls:c});var Nt=(0,_t.I$)("Form",(o,c)=>{let{rootPrefixCls:h}=c;const f=Dt(o,h);return[ge(f),Le(f),yr(f),Ge(f,f.componentCls),Ge(f,f.formItemCls),Wt(f),zn(f),nr(f),(0,Yn.Z)(f),rn.kr]},an,{order:-1e3});const on=[];function Vt(o,c,h){let f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof o=="string"?o:`${c}-${f}`,error:o,errorStatus:h}}var dt=o=>{let{help:c,helpStatus:h,errors:f=on,warnings:v=on,className:n,fieldId:i,onVisibleChanged:u}=o;const{prefixCls:d}=b.useContext(p.Rk),m=`${d}-item-explain`,E=(0,Tt.Z)(d),[x,R,z]=Nt(d,E),_=(0,b.useMemo)(()=>(0,Xe.Z)(d),[d]),N=vt(f),J=vt(v),P=b.useMemo(()=>c!=null?[Vt(c,"help",h)]:[].concat((0,Oe.Z)(N.map((C,U)=>Vt(C,"error","error",U))),(0,Oe.Z)(J.map((C,U)=>Vt(C,"warning","warning",U)))),[c,h,N,J]),Q={};return i&&(Q.id=`${i}_help`),x(b.createElement(ue.ZP,{motionDeadline:_.motionDeadline,motionName:`${d}-show-help`,visible:!!P.length,onVisibleChanged:u},C=>{const{className:U,style:H}=C;return b.createElement("div",Object.assign({},Q,{className:Ce()(m,U,z,E,n,R),style:H,role:"alert"}),b.createElement(ue.V4,Object.assign({keys:P},(0,Xe.Z)(d),{motionName:`${d}-show-help-item`,component:!1}),T=>{const{key:te,error:I,errorStatus:D,className:j,style:B}=T;return b.createElement("div",{key:te,className:Ce()(j,{[`${m}-${D}`]:D}),style:B},I)}))}))},Pt=w(57698),Ht=w(53124),sr=w(98866),wr=w(98675),gt=w(97647);const Or=o=>typeof o=="object"&&o!=null&&o.nodeType===1,ar=(o,c)=>(!c||o!=="hidden")&&o!=="visible"&&o!=="clip",De=(o,c)=>{if(o.clientHeight<o.scrollHeight||o.clientWidth<o.scrollWidth){const h=getComputedStyle(o,null);return ar(h.overflowY,c)||ar(h.overflowX,c)||(f=>{const v=(n=>{if(!n.ownerDocument||!n.ownerDocument.defaultView)return null;try{return n.ownerDocument.defaultView.frameElement}catch(i){return null}})(f);return!!v&&(v.clientHeight<f.scrollHeight||v.clientWidth<f.scrollWidth)})(o)}return!1},lt=(o,c,h,f,v,n,i,u)=>n<o&&i>c||n>o&&i<c?0:n<=o&&u<=h||i>=c&&u>=h?n-o-f:i>c&&u<h||n<o&&u>h?i-c+v:0,tt=o=>{const c=o.parentElement;return c==null?o.getRootNode().host||null:c},Zt=(o,c)=>{var h,f,v,n;if(typeof document=="undefined")return[];const{scrollMode:i,block:u,inline:d,boundary:m,skipOverflowHiddenElements:E}=c,x=typeof m=="function"?m:ie=>ie!==m;if(!Or(o))throw new TypeError("Invalid target");const R=document.scrollingElement||document.documentElement,z=[];let _=o;for(;Or(_)&&x(_);){if(_=tt(_),_===R){z.push(_);break}_!=null&&_===document.body&&De(_)&&!De(document.documentElement)||_!=null&&De(_,E)&&z.push(_)}const N=(f=(h=window.visualViewport)==null?void 0:h.width)!=null?f:innerWidth,J=(n=(v=window.visualViewport)==null?void 0:v.height)!=null?n:innerHeight,{scrollX:P,scrollY:Q}=window,{height:C,width:U,top:H,right:T,bottom:te,left:I}=o.getBoundingClientRect(),{top:D,right:j,bottom:B,left:ae}=(ie=>{const $=window.getComputedStyle(ie);return{top:parseFloat($.scrollMarginTop)||0,right:parseFloat($.scrollMarginRight)||0,bottom:parseFloat($.scrollMarginBottom)||0,left:parseFloat($.scrollMarginLeft)||0}})(o);let M=u==="start"||u==="nearest"?H-D:u==="end"?te+B:H+C/2-D+B,A=d==="center"?I+U/2-ae+j:d==="end"?T+j:I-ae;const re=[];for(let ie=0;ie<z.length;ie++){const $=z[ie],{height:K,width:L,top:ce,right:oe,bottom:me,left:de}=$.getBoundingClientRect();if(i==="if-needed"&&H>=0&&I>=0&&te<=J&&T<=N&&H>=ce&&te<=me&&I>=de&&T<=oe)return re;const pe=getComputedStyle($),Y=parseInt(pe.borderLeftWidth,10),O=parseInt(pe.borderTopWidth,10),W=parseInt(pe.borderRightWidth,10),V=parseInt(pe.borderBottomWidth,10);let ne=0,k=0;const ee="offsetWidth"in $?$.offsetWidth-$.clientWidth-Y-W:0,F="offsetHeight"in $?$.offsetHeight-$.clientHeight-O-V:0,Se="offsetWidth"in $?$.offsetWidth===0?0:L/$.offsetWidth:0,be="offsetHeight"in $?$.offsetHeight===0?0:K/$.offsetHeight:0;if(R===$)ne=u==="start"?M:u==="end"?M-J:u==="nearest"?lt(Q,Q+J,J,O,V,Q+M,Q+M+C,C):M-J/2,k=d==="start"?A:d==="center"?A-N/2:d==="end"?A-N:lt(P,P+N,N,Y,W,P+A,P+A+U,U),ne=Math.max(0,ne+Q),k=Math.max(0,k+P);else{ne=u==="start"?M-ce-O:u==="end"?M-me+V+F:u==="nearest"?lt(ce,me,K,O,V+F,M,M+C,C):M-(ce+K/2)+F/2,k=d==="start"?A-de-Y:d==="center"?A-(de+L/2)+ee/2:d==="end"?A-oe+W+ee:lt(de,oe,L,Y,W+ee,A,A+U,U);const{scrollLeft:Ne,scrollTop:fe}=$;ne=be===0?0:Math.max(0,Math.min(fe+ne/be,$.scrollHeight-K/be+F)),k=Se===0?0:Math.max(0,Math.min(Ne+k/Se,$.scrollWidth-L/Se+ee)),M+=fe-ne,A+=Ne-k}re.push({el:$,top:ne,left:k})}return re},Ln=o=>o===!1?{block:"end",inline:"nearest"}:(c=>c===Object(c)&&Object.keys(c).length!==0)(o)?o:{block:"start",inline:"nearest"};function ir(o,c){if(!o.isConnected||!(v=>{let n=v;for(;n&&n.parentNode;){if(n.parentNode===document)return!0;n=n.parentNode instanceof ShadowRoot?n.parentNode.host:n.parentNode}return!1})(o))return;const h=(v=>{const n=window.getComputedStyle(v);return{top:parseFloat(n.scrollMarginTop)||0,right:parseFloat(n.scrollMarginRight)||0,bottom:parseFloat(n.scrollMarginBottom)||0,left:parseFloat(n.scrollMarginLeft)||0}})(o);if((v=>typeof v=="object"&&typeof v.behavior=="function")(c))return c.behavior(Zt(o,c));const f=typeof c=="boolean"||c==null?void 0:c.behavior;for(const{el:v,top:n,left:i}of Zt(o,Ln(c))){const u=n-h.top+h.bottom,d=i-h.left+h.right;v.scroll({top:u,left:d,behavior:f})}}var ln=w(34203);const cn=["parentNode"],Cr="form_item";function Xt(o){return o===void 0||o===!1?[]:Array.isArray(o)?o:[o]}function Ut(o,c){if(!o.length)return;const h=o.join("_");return c?`${c}_${h}`:cn.includes(h)?`${Cr}_${h}`:h}function un(o,c,h,f,v,n){let i=f;return n!==void 0?i=n:h.validating?i="validating":o.length?i="error":c.length?i="warning":(h.touched||v&&h.validated)&&(i="success"),i}function at(o){return Xt(o).join("_")}function Wn(o,c){const h=c.getFieldInstance(o),f=(0,ln.bn)(h);if(f)return f;const v=Ut(Xt(o),c.__INTERNAL__.name);if(v)return document.getElementById(v)}function Et(o){const[c]=(0,Pt.cI)(),h=b.useRef({}),f=b.useMemo(()=>o!=null?o:Object.assign(Object.assign({},c),{__INTERNAL__:{itemRef:v=>n=>{const i=at(v);n?h.current[i]=n:delete h.current[i]}},scrollToField:function(v){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Wn(v,f);i&&ir(i,Object.assign({scrollMode:"if-needed",block:"nearest"},n))},getFieldInstance:v=>{const n=at(v);return h.current[n]}}),[o,c]);return[f]}var Dn=w(37920),Vn=function(o,c){var h={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&c.indexOf(f)<0&&(h[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,f=Object.getOwnPropertySymbols(o);v<f.length;v++)c.indexOf(f[v])<0&&Object.prototype.propertyIsEnumerable.call(o,f[v])&&(h[f[v]]=o[f[v]]);return h};const or=(o,c)=>{const h=b.useContext(sr.Z),{getPrefixCls:f,direction:v,form:n}=b.useContext(Ht.E_),{prefixCls:i,className:u,rootClassName:d,size:m,disabled:E=h,form:x,colon:R,labelAlign:z,labelWrap:_,labelCol:N,wrapperCol:J,hideRequiredMark:P,layout:Q="horizontal",scrollToFirstError:C,requiredMark:U,onFinishFailed:H,name:T,style:te,feedbackIcons:I,variant:D}=o,j=Vn(o,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),B=(0,wr.Z)(m),ae=b.useContext(Dn.Z),M=(0,b.useMemo)(()=>U!==void 0?U:P?!1:n&&n.requiredMark!==void 0?n.requiredMark:!0,[P,U,n]),A=R!=null?R:n==null?void 0:n.colon,re=f("form",i),ie=(0,Tt.Z)(re),[$,K,L]=Nt(re,ie),ce=Ce()(re,`${re}-${Q}`,{[`${re}-hide-required-mark`]:M===!1,[`${re}-rtl`]:v==="rtl",[`${re}-${B}`]:B},L,ie,K,n==null?void 0:n.className,u,d),[oe]=Et(x),{__INTERNAL__:me}=oe;me.name=T;const de=(0,b.useMemo)(()=>({name:T,labelAlign:z,labelCol:N,labelWrap:_,wrapperCol:J,vertical:Q==="vertical",colon:A,requiredMark:M,itemRef:me.itemRef,form:oe,feedbackIcons:I}),[T,z,N,J,Q,A,M,oe,I]),pe=b.useRef(null);b.useImperativeHandle(c,()=>{var W;return Object.assign(Object.assign({},oe),{nativeElement:(W=pe.current)===null||W===void 0?void 0:W.nativeElement})});const Y=(W,V)=>{if(W){let ne={block:"nearest"};typeof W=="object"&&(ne=W),oe.scrollToField(V,ne)}},O=W=>{if(H==null||H(W),W.errorFields.length){const V=W.errorFields[0].name;if(C!==void 0){Y(C,V);return}n&&n.scrollToFirstError!==void 0&&Y(n.scrollToFirstError,V)}};return $(b.createElement(p.pg.Provider,{value:D},b.createElement(sr.n,{disabled:E},b.createElement(gt.Z.Provider,{value:B},b.createElement(p.RV,{validateMessages:ae},b.createElement(p.q3.Provider,{value:de},b.createElement(Pt.ZP,Object.assign({id:T},j,{name:T,onFinishFailed:O,form:oe,ref:pe,style:Object.assign(Object.assign({},n==null?void 0:n.style),te),className:ce}))))))))};var Rt=b.forwardRef(or),Sr=w(30470),lr=w(42550),fn=w(96159),hn=w(27288),mn=w(50344);function _r(o){if(typeof o=="function")return o;const c=(0,mn.Z)(o);return c.length<=1?c[0]:c}const gn=()=>{const{status:o,errors:c=[],warnings:h=[]}=(0,b.useContext)(p.aM);return{status:o,errors:c,warnings:h}};gn.Context=p.aM;var Pr=gn,pn=w(75164);function Hn(o){const[c,h]=b.useState(o),f=(0,b.useRef)(null),v=(0,b.useRef)([]),n=(0,b.useRef)(!1);b.useEffect(()=>(n.current=!1,()=>{n.current=!0,pn.Z.cancel(f.current),f.current=null}),[]);function i(u){n.current||(f.current===null&&(v.current=[],f.current=(0,pn.Z)(()=>{f.current=null,h(d=>{let m=d;return v.current.forEach(E=>{m=E(m)}),m})})),v.current.push(u))}return[c,i]}function nt(){const{itemRef:o}=b.useContext(p.q3),c=b.useRef({});function h(f,v){const n=v&&typeof v=="object"&&v.ref,i=f.join("_");return(c.current.name!==i||c.current.originRef!==n)&&(c.current.name=i,c.current.originRef=n,c.current.ref=(0,lr.sQ)(o(f),n)),c.current.ref}return h}var Zn=w(5110),bn=w(8410),cr=w(98423),Gt=w(74443),yn=(0,b.createContext)({});const ur=o=>{const{componentCls:c}=o;return{[c]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},xr=o=>{const{componentCls:c}=o;return{[c]:{position:"relative",maxWidth:"100%",minHeight:1}}},$r=(o,c)=>{const{prefixCls:h,componentCls:f,gridColumns:v}=o,n={};for(let i=v;i>=0;i--)i===0?(n[`${f}${c}-${i}`]={display:"none"},n[`${f}-push-${i}`]={insetInlineStart:"auto"},n[`${f}-pull-${i}`]={insetInlineEnd:"auto"},n[`${f}${c}-push-${i}`]={insetInlineStart:"auto"},n[`${f}${c}-pull-${i}`]={insetInlineEnd:"auto"},n[`${f}${c}-offset-${i}`]={marginInlineStart:0},n[`${f}${c}-order-${i}`]={order:0}):(n[`${f}${c}-${i}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${i/v*100}%`,maxWidth:`${i/v*100}%`}],n[`${f}${c}-push-${i}`]={insetInlineStart:`${i/v*100}%`},n[`${f}${c}-pull-${i}`]={insetInlineEnd:`${i/v*100}%`},n[`${f}${c}-offset-${i}`]={marginInlineStart:`${i/v*100}%`},n[`${f}${c}-order-${i}`]={order:i});return n[`${f}${c}-flex`]={flex:`var(--${h}${c}-flex)`},n},Mt=(o,c)=>$r(o,c),dr=(o,c,h)=>({[`@media (min-width: ${(0,Ue.bf)(c)})`]:Object.assign({},Mt(o,h))}),Bt=()=>({}),Er=()=>({}),wn=(0,_t.I$)("Grid",ur,Bt),Rr=(0,_t.I$)("Grid",o=>{const c=(0,Lt.TS)(o,{gridColumns:24}),h={"-sm":c.screenSMMin,"-md":c.screenMDMin,"-lg":c.screenLGMin,"-xl":c.screenXLMin,"-xxl":c.screenXXLMin};return[xr(c),Mt(c,""),Mt(c,"-xs"),Object.keys(h).map(f=>dr(c,h[f],f)).reduce((f,v)=>Object.assign(Object.assign({},f),v),{})]},Er);var Ir=function(o,c){var h={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&c.indexOf(f)<0&&(h[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,f=Object.getOwnPropertySymbols(o);v<f.length;v++)c.indexOf(f[v])<0&&Object.prototype.propertyIsEnumerable.call(o,f[v])&&(h[f[v]]=o[f[v]]);return h};const fr=null,Yr=null;function Mr(o,c){const[h,f]=b.useState(typeof o=="string"?o:""),v=()=>{if(typeof o=="string"&&f(o),typeof o=="object")for(let n=0;n<Gt.c4.length;n++){const i=Gt.c4[n];if(!c[i])continue;const u=o[i];if(u!==void 0){f(u);return}}};return b.useEffect(()=>{v()},[JSON.stringify(o),c]),h}var hr=b.forwardRef((o,c)=>{const{prefixCls:h,justify:f,align:v,className:n,style:i,children:u,gutter:d=0,wrap:m}=o,E=Ir(o,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:x,direction:R}=b.useContext(Ht.E_),[z,_]=b.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[N,J]=b.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),P=Mr(v,N),Q=Mr(f,N),C=b.useRef(d),U=(0,Gt.ZP)();b.useEffect(()=>{const $=U.subscribe(K=>{J(K);const L=C.current||0;(!Array.isArray(L)&&typeof L=="object"||Array.isArray(L)&&(typeof L[0]=="object"||typeof L[1]=="object"))&&_(K)});return()=>U.unsubscribe($)},[]);const H=()=>{const $=[void 0,void 0];return(Array.isArray(d)?d:[d,void 0]).forEach((L,ce)=>{if(typeof L=="object")for(let oe=0;oe<Gt.c4.length;oe++){const me=Gt.c4[oe];if(z[me]&&L[me]!==void 0){$[ce]=L[me];break}}else $[ce]=L}),$},T=x("row",h),[te,I,D]=wn(T),j=H(),B=Ce()(T,{[`${T}-no-wrap`]:m===!1,[`${T}-${Q}`]:Q,[`${T}-${P}`]:P,[`${T}-rtl`]:R==="rtl"},n,I,D),ae={},M=j[0]!=null&&j[0]>0?j[0]/-2:void 0;M&&(ae.marginLeft=M,ae.marginRight=M);const[A,re]=j;ae.rowGap=re;const ie=b.useMemo(()=>({gutter:[A,re],wrap:m}),[A,re,m]);return te(b.createElement(yn.Provider,{value:ie},b.createElement("div",Object.assign({},E,{className:B,style:Object.assign(Object.assign({},ae),i),ref:c}),u)))}),qt=function(o,c){var h={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&c.indexOf(f)<0&&(h[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,f=Object.getOwnPropertySymbols(o);v<f.length;v++)c.indexOf(f[v])<0&&Object.prototype.propertyIsEnumerable.call(o,f[v])&&(h[f[v]]=o[f[v]]);return h};function mr(o){return typeof o=="number"?`${o} ${o} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(o)?`0 0 ${o}`:o}const zt=["xs","sm","md","lg","xl","xxl"];var gr=b.forwardRef((o,c)=>{const{getPrefixCls:h,direction:f}=b.useContext(Ht.E_),{gutter:v,wrap:n}=b.useContext(yn),{prefixCls:i,span:u,order:d,offset:m,push:E,pull:x,className:R,children:z,flex:_,style:N}=o,J=qt(o,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),P=h("col",i),[Q,C,U]=Rr(P),H={};let T={};zt.forEach(D=>{let j={};const B=o[D];typeof B=="number"?j.span=B:typeof B=="object"&&(j=B||{}),delete J[D],T=Object.assign(Object.assign({},T),{[`${P}-${D}-${j.span}`]:j.span!==void 0,[`${P}-${D}-order-${j.order}`]:j.order||j.order===0,[`${P}-${D}-offset-${j.offset}`]:j.offset||j.offset===0,[`${P}-${D}-push-${j.push}`]:j.push||j.push===0,[`${P}-${D}-pull-${j.pull}`]:j.pull||j.pull===0,[`${P}-rtl`]:f==="rtl"}),j.flex&&(T[`${P}-${D}-flex`]=!0,H[`--${P}-${D}-flex`]=mr(j.flex))});const te=Ce()(P,{[`${P}-${u}`]:u!==void 0,[`${P}-order-${d}`]:d,[`${P}-offset-${m}`]:m,[`${P}-push-${E}`]:E,[`${P}-pull-${x}`]:x},R,T,C,U),I={};if(v&&v[0]>0){const D=v[0]/2;I.paddingLeft=D,I.paddingRight=D}return _&&(I.flex=mr(_),n===!1&&!I.minWidth&&(I.minWidth=0)),Q(b.createElement("div",Object.assign({},J,{style:Object.assign(Object.assign(Object.assign({},I),N),H),className:te,ref:c}),z))});const Xn=o=>{const{formItemCls:c}=o;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${c}-control`]:{display:"flex"}}}};var jr=(0,_t.bk)(["Form","item-item"],(o,c)=>{let{rootPrefixCls:h}=c;const f=Dt(o,h);return[Xn(f)]}),pr=o=>{const{prefixCls:c,status:h,wrapperCol:f,children:v,errors:n,warnings:i,_internalItemRender:u,extra:d,help:m,fieldId:E,marginBottom:x,onErrorVisibleChanged:R}=o,z=`${c}-item`,_=b.useContext(p.q3),N=f||_.wrapperCol||{},J=Ce()(`${z}-control`,N.className),P=b.useMemo(()=>Object.assign({},_),[_]);delete P.labelCol,delete P.wrapperCol;const Q=b.createElement("div",{className:`${z}-control-input`},b.createElement("div",{className:`${z}-control-input-content`},v)),C=b.useMemo(()=>({prefixCls:c,status:h}),[c,h]),U=x!==null||n.length||i.length?b.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},b.createElement(p.Rk.Provider,{value:C},b.createElement(dt,{fieldId:E,errors:n,warnings:i,help:m,helpStatus:h,className:`${z}-explain-connected`,onVisibleChanged:R})),!!x&&b.createElement("div",{style:{width:0,height:x}})):null,H={};E&&(H.id=`${E}_extra`);const T=d?b.createElement("div",Object.assign({},H,{className:`${z}-extra`}),d):null,te=u&&u.mark==="pro_table_render"&&u.render?u.render(o,{input:Q,errorList:U,extra:T}):b.createElement(b.Fragment,null,Q,U,T);return b.createElement(p.q3.Provider,{value:P},b.createElement(gr,Object.assign({},N,{className:J}),te),b.createElement(jr,{prefixCls:c}))},Un=w(87462),ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},Re=ft,Cn=w(84089),Sn=function(c,h){return b.createElement(Cn.Z,(0,Un.Z)({},c,{ref:h,icon:Re}))},xn=b.forwardRef(Sn),$n=xn,En=w(76745),Rn=w(81570),In=(o,c)=>{const h=b.useContext(En.Z),f=b.useMemo(()=>{var n;const i=c||Rn.Z[o],u=(n=h==null?void 0:h[o])!==null&&n!==void 0?n:{};return Object.assign(Object.assign({},typeof i=="function"?i():i),u||{})},[o,c,h]),v=b.useMemo(()=>{const n=h==null?void 0:h.locale;return h!=null&&h.exist&&!n?Rn.Z.locale:n},[h]);return[f,v]},An=w(61781),On=function(o,c){var h={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&c.indexOf(f)<0&&(h[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,f=Object.getOwnPropertySymbols(o);v<f.length;v++)c.indexOf(f[v])<0&&Object.prototype.propertyIsEnumerable.call(o,f[v])&&(h[f[v]]=o[f[v]]);return h};function _n(o){return o?typeof o=="object"&&!b.isValidElement(o)?o:{title:o}:null}var Jt=o=>{let{prefixCls:c,label:h,htmlFor:f,labelCol:v,labelAlign:n,colon:i,required:u,requiredMark:d,tooltip:m,vertical:E}=o;var x;const[R]=In("Form"),{labelAlign:z,labelCol:_,labelWrap:N,colon:J}=b.useContext(p.q3);if(!h)return null;const P=v||_||{},Q=n||z,C=`${c}-item-label`,U=Ce()(C,Q==="left"&&`${C}-left`,P.className,{[`${C}-wrap`]:!!N});let H=h;const T=i===!0||J!==!1&&i!==!1;T&&!E&&typeof h=="string"&&h.trim()!==""&&(H=h.replace(/[:|ï¼š]\s*$/,""));const I=_n(m);if(I){const{icon:ae=b.createElement($n,null)}=I,M=On(I,["icon"]),A=b.createElement(An.Z,Object.assign({},M),b.cloneElement(ae,{className:`${c}-item-tooltip`,title:"",onClick:re=>{re.preventDefault()},tabIndex:null}));H=b.createElement(b.Fragment,null,H,A)}const D=d==="optional",j=typeof d=="function";j?H=d(H,{required:!!u}):D&&!u&&(H=b.createElement(b.Fragment,null,H,b.createElement("span",{className:`${c}-item-optional`,title:""},(R==null?void 0:R.optional)||((x=Rn.Z.Form)===null||x===void 0?void 0:x.optional))));const B=Ce()({[`${c}-item-required`]:u,[`${c}-item-required-mark-optional`]:D||j,[`${c}-item-no-colon`]:!T});return b.createElement(gr,Object.assign({},P,{className:U}),b.createElement("label",{htmlFor:f,className:B,title:typeof h=="string"?h:""},H))},Jn=w(89739),Pn=w(4340),br=w(21640),Mn=w(50888);const Kn={success:Jn.Z,warning:br.Z,error:Pn.Z,validating:Mn.Z};function Kt(o){let{children:c,errors:h,warnings:f,hasFeedback:v,validateStatus:n,prefixCls:i,meta:u,noStyle:d}=o;const m=`${i}-item`,{feedbackIcons:E}=b.useContext(p.q3),x=un(h,f,u,null,!!v,n),{isFormItemInput:R,status:z,hasFeedback:_,feedbackIcon:N}=b.useContext(p.aM),J=b.useMemo(()=>{var P;let Q;if(v){const U=v!==!0&&v.icons||E,H=x&&((P=U==null?void 0:U({status:x,errors:h,warnings:f}))===null||P===void 0?void 0:P[x]),T=x&&Kn[x];Q=H!==!1&&T?b.createElement("span",{className:Ce()(`${m}-feedback-icon`,`${m}-feedback-icon-${x}`)},H||b.createElement(T,null)):null}const C={status:x||"",errors:h,warnings:f,hasFeedback:!!v,feedbackIcon:Q,isFormItemInput:!0};return d&&(C.status=(x!=null?x:z)||"",C.isFormItemInput=R,C.hasFeedback=!!(v!=null?v:_),C.feedbackIcon=v!==void 0?C.feedbackIcon:N),C},[x,v,d,R,z]);return b.createElement(p.aM.Provider,{value:J},c)}var Fn=function(o,c){var h={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&c.indexOf(f)<0&&(h[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,f=Object.getOwnPropertySymbols(o);v<f.length;v++)c.indexOf(f[v])<0&&Object.prototype.propertyIsEnumerable.call(o,f[v])&&(h[f[v]]=o[f[v]]);return h};function jn(o){const{prefixCls:c,className:h,rootClassName:f,style:v,help:n,errors:i,warnings:u,validateStatus:d,meta:m,hasFeedback:E,hidden:x,children:R,fieldId:z,required:_,isRequired:N,onSubItemMetaChange:J,layout:P}=o,Q=Fn(o,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),C=`${c}-item`,{requiredMark:U,vertical:H}=b.useContext(p.q3),T=H||P==="vertical",te=b.useRef(null),I=vt(i),D=vt(u),j=n!=null,B=!!(j||i.length||u.length),ae=!!te.current&&(0,Zn.Z)(te.current),[M,A]=b.useState(null);(0,bn.Z)(()=>{if(B&&te.current){const L=getComputedStyle(te.current);A(parseInt(L.marginBottom,10))}},[B,ae]);const re=L=>{L||A(null)},$=function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ce=L?I:m.errors,oe=L?D:m.warnings;return un(ce,oe,m,"",!!E,d)}(),K=Ce()(C,h,f,{[`${C}-with-help`]:j||I.length||D.length,[`${C}-has-feedback`]:$&&E,[`${C}-has-success`]:$==="success",[`${C}-has-warning`]:$==="warning",[`${C}-has-error`]:$==="error",[`${C}-is-validating`]:$==="validating",[`${C}-hidden`]:x,[`${C}-${P}`]:P});return b.createElement("div",{className:K,style:v,ref:te},b.createElement(hr,Object.assign({className:`${C}-row`},(0,cr.Z)(Q,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),b.createElement(Jt,Object.assign({htmlFor:z},o,{requiredMark:U,required:_!=null?_:N,prefixCls:c,vertical:T})),b.createElement(pr,Object.assign({},o,m,{errors:I,warnings:D,prefixCls:c,status:$,help:n,marginBottom:M,onErrorVisibleChanged:re}),b.createElement(p.qI.Provider,{value:J},b.createElement(Kt,{prefixCls:c,meta:m,errors:m.errors,warnings:m.warnings,hasFeedback:E,validateStatus:$},R)))),!!M&&b.createElement("div",{className:`${C}-margin-offset`,style:{marginBottom:-M}}))}const Qt="__SPLIT__",ct=null;function Tr(o,c){const h=Object.keys(o),f=Object.keys(c);return h.length===f.length&&h.every(v=>{const n=o[v],i=c[v];return n===i||typeof n=="function"||typeof i=="function"})}const Nr=b.memo(o=>{let{children:c}=o;return c},(o,c)=>Tr(o.control,c.control)&&o.update===c.update&&o.childProps.length===c.childProps.length&&o.childProps.every((h,f)=>h===c.childProps[f]));function Ft(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function Tn(o){const{name:c,noStyle:h,className:f,dependencies:v,prefixCls:n,shouldUpdate:i,rules:u,children:d,required:m,label:E,messageVariables:x,trigger:R="onChange",validateTrigger:z,hidden:_,help:N,layout:J}=o,{getPrefixCls:P}=b.useContext(Ht.E_),{name:Q}=b.useContext(p.q3),C=_r(d),U=typeof C=="function",H=b.useContext(p.qI),{validateTrigger:T}=b.useContext(Pt.zb),te=z!==void 0?z:T,I=c!=null,D=P("form",n),j=(0,Tt.Z)(D),[B,ae,M]=Nt(D,j),A=(0,hn.ln)("Form.Item"),re=b.useContext(Pt.ZM),ie=b.useRef(),[$,K]=Hn({}),[L,ce]=(0,Sr.Z)(()=>Ft()),oe=V=>{const ne=re==null?void 0:re.getKey(V.name);if(ce(V.destroy?Ft():V,!0),h&&N!==!1&&H){let k=V.name;if(V.destroy)k=ie.current||k;else if(ne!==void 0){const[ee,F]=ne;k=[ee].concat((0,Oe.Z)(F)),ie.current=k}H(V,k)}},me=(V,ne)=>{K(k=>{const ee=Object.assign({},k),Se=[].concat((0,Oe.Z)(V.name.slice(0,-1)),(0,Oe.Z)(ne)).join(Qt);return V.destroy?delete ee[Se]:ee[Se]=V,ee})},[de,pe]=b.useMemo(()=>{const V=(0,Oe.Z)(L.errors),ne=(0,Oe.Z)(L.warnings);return Object.values($).forEach(k=>{V.push.apply(V,(0,Oe.Z)(k.errors||[])),ne.push.apply(ne,(0,Oe.Z)(k.warnings||[]))}),[V,ne]},[$,L.errors,L.warnings]),Y=nt();function O(V,ne,k){return h&&!_?b.createElement(Kt,{prefixCls:D,hasFeedback:o.hasFeedback,validateStatus:o.validateStatus,meta:L,errors:de,warnings:pe,noStyle:!0},V):b.createElement(jn,Object.assign({key:"row"},o,{className:Ce()(f,M,j,ae),prefixCls:D,fieldId:ne,isRequired:k,errors:de,warnings:pe,meta:L,onSubItemMetaChange:me,layout:J}),V)}if(!I&&!U&&!v)return B(O(C));let W={};return typeof E=="string"?W.label=E:c&&(W.label=String(c)),x&&(W=Object.assign(Object.assign({},W),x)),B(b.createElement(Pt.gN,Object.assign({},o,{messageVariables:W,trigger:R,validateTrigger:te,onMetaChange:oe}),(V,ne,k)=>{const ee=Xt(c).length&&ne?ne.name:[],F=Ut(ee,Q),Se=m!==void 0?m:!!(u&&u.some(fe=>{if(fe&&typeof fe=="object"&&fe.required&&!fe.warningOnly)return!0;if(typeof fe=="function"){const Me=fe(k);return Me&&Me.required&&!Me.warningOnly}return!1})),be=Object.assign({},V);let Ne=null;if(Array.isArray(C)&&I)Ne=C;else if(!(U&&(!(i||v)||I))){if(!(v&&!U&&!I))if(b.isValidElement(C)){const fe=Object.assign(Object.assign({},C.props),be);if(fe.id||(fe.id=F),N||de.length>0||pe.length>0||o.extra){const Be=[];(N||de.length>0)&&Be.push(`${F}_help`),o.extra&&Be.push(`${F}_extra`),fe["aria-describedby"]=Be.join(" ")}de.length>0&&(fe["aria-invalid"]="true"),Se&&(fe["aria-required"]="true"),(0,lr.Yr)(C)&&(fe.ref=Y(ee,C)),new Set([].concat((0,Oe.Z)(Xt(R)),(0,Oe.Z)(Xt(te)))).forEach(Be=>{fe[Be]=function(){for(var _e,Ve,yt,Je,It,Ie=arguments.length,ve=new Array(Ie),Pe=0;Pe<Ie;Pe++)ve[Pe]=arguments[Pe];(yt=be[Be])===null||yt===void 0||(_e=yt).call.apply(_e,[be].concat(ve)),(It=(Je=C.props)[Be])===null||It===void 0||(Ve=It).call.apply(Ve,[Je].concat(ve))}});const Fe=[fe["aria-required"],fe["aria-invalid"],fe["aria-describedby"]];Ne=b.createElement(Nr,{control:be,update:C,childProps:Fe},(0,fn.Tm)(C,fe))}else U&&(i||v)&&!I?Ne=C(k):Ne=C}return O(Ne,F,Se)}))}const Yt=Tn;Yt.useStatus=Pr;var vr=Yt,ht=function(o,c){var h={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&c.indexOf(f)<0&&(h[f]=o[f]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,f=Object.getOwnPropertySymbols(o);v<f.length;v++)c.indexOf(f[v])<0&&Object.prototype.propertyIsEnumerable.call(o,f[v])&&(h[f[v]]=o[f[v]]);return h},qe=o=>{var{prefixCls:c,children:h}=o,f=ht(o,["prefixCls","children"]);const{getPrefixCls:v}=b.useContext(Ht.E_),n=v("form",c),i=b.useMemo(()=>({prefixCls:n,status:"error"}),[n]);return b.createElement(Pt.aV,Object.assign({},f),(u,d,m)=>b.createElement(p.Rk.Provider,{value:i},h(u.map(E=>Object.assign(Object.assign({},E),{fieldKey:E.key})),d,{errors:m.errors,warnings:m.warnings})))};function Nn(){const{form:o}=(0,b.useContext)(p.q3);return o}const ut=Rt;ut.Item=vr,ut.List=qe,ut.ErrorList=dt,ut.useForm=Et,ut.useFormInstance=Nn,ut.useWatch=Pt.qo,ut.Provider=p.RV,ut.create=()=>{};var kt=ut},79006:function(ye,we,w){w.d(we,{Z:function(){return v}});var p=w(62435),Oe=w(93967),b=w.n(Oe),Te=w(53124),Ce=w(65223),ue=w(54548),Xe=w(14747),Tt=w(80110),vt=w(92030),Ue=w(45503);function et(n){return(0,Ue.TS)(n,{inputAffixPadding:n.paddingXXS})}const rn=n=>{const{controlHeight:i,fontSize:u,lineHeight:d,lineWidth:m,controlHeightSM:E,controlHeightLG:x,fontSizeLG:R,lineHeightLG:z,paddingSM:_,controlPaddingHorizontalSM:N,controlPaddingHorizontal:J,colorFillAlter:P,colorPrimaryHover:Q,colorPrimary:C,controlOutlineWidth:U,controlOutline:H,colorErrorOutline:T,colorWarningOutline:te,colorBgContainer:I}=n;return{paddingBlock:Math.max(Math.round((i-u*d)/2*10)/10-m,0),paddingBlockSM:Math.max(Math.round((E-u*d)/2*10)/10-m,0),paddingBlockLG:Math.ceil((x-R*z)/2*10)/10-m,paddingInline:_-m,paddingInlineSM:N-m,paddingInlineLG:J-m,addonBg:P,activeBorderColor:C,hoverBorderColor:Q,activeShadow:`0 0 0 ${U}px ${H}`,errorActiveShadow:`0 0 0 ${U}px ${T}`,warningActiveShadow:`0 0 0 ${U}px ${te}`,hoverBg:I,activeBg:I,inputFontSize:u,inputFontSizeLG:R,inputFontSizeSM:u}},Yn=n=>({borderColor:n.hoverBorderColor,backgroundColor:n.hoverBg}),Lt=n=>({color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},Yn((0,Ue.TS)(n,{hoverBorderColor:n.colorBorder,hoverBg:n.colorBgContainerDisabled})))}),_t=(n,i)=>({background:n.colorBgContainer,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:i.borderColor,"&:hover":{borderColor:i.hoverBorderColor,backgroundColor:n.hoverBg},"&:focus, &:focus-within":{borderColor:i.activeBorderColor,boxShadow:i.activeShadow,outline:0,backgroundColor:n.activeBg}}),kn=(n,i)=>({[`&${n.componentCls}-status-${i.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},_t(n,i)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:i.affixColor}}),[`&${n.componentCls}-status-${i.status}${n.componentCls}-disabled`]:{borderColor:i.borderColor}}),yr=(n,i)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_t(n,{borderColor:n.colorBorder,hoverBorderColor:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeShadow:n.activeShadow})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},Lt(n))}),kn(n,{status:"error",borderColor:n.colorError,hoverBorderColor:n.colorErrorBorderHover,activeBorderColor:n.colorError,activeShadow:n.errorActiveShadow,affixColor:n.colorError})),kn(n,{status:"warning",borderColor:n.colorWarning,hoverBorderColor:n.colorWarningBorderHover,activeBorderColor:n.colorWarning,activeShadow:n.warningActiveShadow,affixColor:n.colorWarning})),i)}),er=(n,i)=>({[`&${n.componentCls}-group-wrapper-status-${i.status}`]:{[`${n.componentCls}-group-addon`]:{borderColor:i.addonBorderColor,color:i.addonColor}}}),tr=n=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.addonBg,border:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},er(n,{status:"error",addonBorderColor:n.colorError,addonColor:n.colorErrorText})),er(n,{status:"warning",addonBorderColor:n.colorWarning,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group-addon`]:Object.assign({},Lt(n))}})}),ge=(n,i)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n.componentCls}-disabled, &[disabled]`]:{color:n.colorTextDisabled}},i)}),Le=(n,i)=>({background:i.bg,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:i==null?void 0:i.inputColor},"&:hover":{background:i.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:i.activeBorderColor,backgroundColor:n.activeBg}}),Ge=(n,i)=>({[`&${n.componentCls}-status-${i.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},Le(n,i)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:i.affixColor}})}),Wt=(n,i)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Le(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.colorPrimary})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},Lt(n))}),Ge(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,inputColor:n.colorErrorText,affixColor:n.colorError})),Ge(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,inputColor:n.colorWarningText,affixColor:n.colorWarning})),i)}),Ye=(n,i)=>({[`&${n.componentCls}-group-wrapper-status-${i.status}`]:{[`${n.componentCls}-group-addon`]:{background:i.addonBg,color:i.addonColor}}}),sn=n=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary},[`${n.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}}}},Ye(n,{status:"error",addonBg:n.colorErrorBg,addonColor:n.colorErrorText})),Ye(n,{status:"warning",addonBg:n.colorWarningBg,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary,color:n.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`}}}})}),zn=n=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:n,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),nr=n=>({borderColor:n.activeBorderColor,boxShadow:n.activeShadow,outline:0,backgroundColor:n.activeBg}),an=n=>{const{paddingBlockLG:i,lineHeightLG:u,borderRadiusLG:d,paddingInlineLG:m}=n;return{padding:`${(0,ue.bf)(i)} ${(0,ue.bf)(m)}`,fontSize:n.inputFontSizeLG,lineHeight:u,borderRadius:d}},Dt=n=>({padding:`${(0,ue.bf)(n.paddingBlockSM)} ${(0,ue.bf)(n.paddingInlineSM)}`,fontSize:n.inputFontSizeSM,borderRadius:n.borderRadiusSM}),Nt=n=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,ue.bf)(n.paddingBlock)} ${(0,ue.bf)(n.paddingInline)}`,color:n.colorText,fontSize:n.inputFontSize,lineHeight:n.lineHeight,borderRadius:n.borderRadius,transition:`all ${n.motionDurationMid}`},zn(n.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:n.controlHeight,lineHeight:n.lineHeight,verticalAlign:"bottom",transition:`all ${n.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},an(n)),"&-sm":Object.assign({},Dt(n)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),on=n=>{const{componentCls:i,antCls:u}=n;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:n.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${i}, &-lg > ${i}-group-addon`]:Object.assign({},an(n)),[`&-sm ${i}, &-sm > ${i}-group-addon`]:Object.assign({},Dt(n)),[`&-lg ${u}-select-single ${u}-select-selector`]:{height:n.controlHeightLG},[`&-sm ${u}-select-single ${u}-select-selector`]:{height:n.controlHeightSM},[`> ${i}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${i}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,ue.bf)(n.paddingInline)}`,color:n.colorText,fontWeight:"normal",fontSize:n.inputFontSize,textAlign:"center",borderRadius:n.borderRadius,transition:`all ${n.motionDurationSlow}`,lineHeight:1,[`${u}-select`]:{margin:`${(0,ue.bf)(n.calc(n.paddingBlock).add(1).mul(-1).equal())} ${(0,ue.bf)(n.calc(n.paddingInline).mul(-1).equal())}`,[`&${u}-select-single:not(${u}-select-customize-input):not(${u}-pagination-size-changer)`]:{[`${u}-select-selector`]:{backgroundColor:"inherit",border:`${(0,ue.bf)(n.lineWidth)} ${n.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${u}-select-selector`]:{color:n.colorPrimary}}},[`${u}-cascader-picker`]:{margin:`-9px ${(0,ue.bf)(n.calc(n.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${u}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${i}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${i}-search-with-button &`]:{zIndex:0}}},[`> ${i}:first-child, ${i}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${u}-select ${u}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${i}-affix-wrapper`]:{[`&:not(:first-child) ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${i}:last-child, ${i}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${u}-select ${u}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${i}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${i}-search &`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius}},[`&:not(:first-child), ${i}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${i}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,Xe.dF)()),{[`${i}-group-addon, ${i}-group-wrap, > ${i}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:n.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${i}-affix-wrapper,
        & > ${i}-number-affix-wrapper,
        & > ${u}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderInlineEndWidth:n.lineWidth},[`${i}`]:{float:"none"},[`& > ${u}-select > ${u}-select-selector,
      & > ${u}-select-auto-complete ${i},
      & > ${u}-cascader-picker ${i},
      & > ${i}-group-wrapper ${i}`]:{borderInlineEndWidth:n.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${u}-select-focused`]:{zIndex:1},[`& > ${u}-select > ${u}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${u}-select:first-child > ${u}-select-selector,
      & > ${u}-select-auto-complete:first-child ${i},
      & > ${u}-cascader-picker:first-child ${i}`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius},[`& > *:last-child,
      & > ${u}-select:last-child > ${u}-select-selector,
      & > ${u}-cascader-picker:last-child ${i},
      & > ${u}-cascader-picker-focused:last-child ${i}`]:{borderInlineEndWidth:n.lineWidth,borderStartEndRadius:n.borderRadius,borderEndEndRadius:n.borderRadius},[`& > ${u}-select-auto-complete ${i}`]:{verticalAlign:"top"},[`${i}-group-wrapper + ${i}-group-wrapper`]:{marginInlineStart:n.calc(n.lineWidth).mul(-1).equal(),[`${i}-affix-wrapper`]:{borderRadius:0}},[`${i}-group-wrapper:not(:last-child)`]:{[`&${i}-search > ${i}-group`]:{[`& > ${i}-group-addon > ${i}-search-button`]:{borderRadius:0},[`& > ${i}`]:{borderStartStartRadius:n.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:n.borderRadius}}}})}},Vt=n=>{const{componentCls:i,controlHeightSM:u,lineWidth:d,calc:m}=n,x=m(u).sub(m(d).mul(2)).sub(16).div(2).equal();return{[i]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,Xe.Wf)(n)),Nt(n)),yr(n)),Wt(n)),ge(n)),{'&[type="color"]':{height:n.controlHeight,[`&${i}-lg`]:{height:n.controlHeightLG},[`&${i}-sm`]:{height:u,paddingTop:x,paddingBottom:x}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},rr=n=>{const{componentCls:i}=n;return{[`${i}-clear-icon`]:{margin:0,color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${n.motionDurationSlow}`,"&:hover":{color:n.colorTextTertiary},"&:active":{color:n.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,ue.bf)(n.inputAffixPadding)}`}}}},dt=n=>{const{componentCls:i,inputAffixPadding:u,colorTextDescription:d,motionDurationSlow:m,colorIcon:E,colorIconHover:x,iconCls:R}=n;return{[`${i}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},Nt(n)),{display:"inline-flex",[`&:not(${i}-disabled):hover`]:{zIndex:1,[`${i}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${i}`]:{padding:0},[`> input${i}, > textarea${i}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${i}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:n.paddingXS}},"&-show-count-suffix":{color:d},"&-show-count-has-suffix":{marginInlineEnd:n.paddingXXS},"&-prefix":{marginInlineEnd:u},"&-suffix":{marginInlineStart:u}}}),rr(n)),{[`${R}${i}-password-icon`]:{color:E,cursor:"pointer",transition:`all ${m}`,"&:hover":{color:x}}})}},Pt=n=>{const{componentCls:i,borderRadiusLG:u,borderRadiusSM:d}=n;return{[`${i}-group`]:Object.assign(Object.assign(Object.assign({},(0,Xe.Wf)(n)),on(n)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${i}-group-addon`]:{borderRadius:u,fontSize:n.inputFontSizeLG}},"&-sm":{[`${i}-group-addon`]:{borderRadius:d}}},tr(n)),sn(n)),{[`&:not(${i}-compact-first-item):not(${i}-compact-last-item)${i}-compact-item`]:{[`${i}, ${i}-group-addon`]:{borderRadius:0}},[`&:not(${i}-compact-last-item)${i}-compact-first-item`]:{[`${i}, ${i}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${i}-compact-first-item)${i}-compact-last-item`]:{[`${i}, ${i}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${i}-compact-last-item)${i}-compact-item`]:{[`${i}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},Ht=n=>{const{componentCls:i,antCls:u}=n,d=`${i}-search`;return{[d]:{[`${i}`]:{"&:hover, &:focus":{borderColor:n.colorPrimaryHover,[`+ ${i}-group-addon ${d}-button:not(${u}-btn-primary)`]:{borderInlineStartColor:n.colorPrimaryHover}}},[`${i}-affix-wrapper`]:{borderRadius:0},[`${i}-lg`]:{lineHeight:n.calc(n.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${i}-group`]:{[`> ${i}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${d}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:n.borderRadius,borderEndEndRadius:n.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${d}-button:not(${u}-btn-primary)`]:{color:n.colorTextDescription,"&:hover":{color:n.colorPrimaryHover},"&:active":{color:n.colorPrimaryActive},[`&${u}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${d}-button`]:{height:n.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${d}-button`]:{height:n.controlHeightLG},[`&-small ${d}-button`]:{height:n.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${i}-compact-item`]:{[`&:not(${i}-compact-last-item)`]:{[`${i}-group-addon`]:{[`${i}-search-button`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${i}-compact-first-item)`]:{[`${i},${i}-affix-wrapper`]:{borderRadius:0}},[`> ${i}-group-addon ${i}-search-button,
        > ${i},
        ${i}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${i}-affix-wrapper-focused`]:{zIndex:2}}}}},sr=n=>{const{componentCls:i,paddingLG:u}=n,d=`${i}-textarea`;return{[d]:{position:"relative","&-show-count":{[`> ${i}`]:{height:"100%"},[`${i}-data-count`]:{position:"absolute",bottom:n.calc(n.fontSize).mul(n.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:n.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${i},
        &-affix-wrapper${d}-has-feedback ${i}
      `]:{paddingInlineEnd:u},[`&-affix-wrapper${i}-affix-wrapper`]:{padding:0,[`> textarea${i}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${i}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${i}-clear-icon`]:{position:"absolute",insetInlineEnd:n.paddingXS,insetBlockStart:n.paddingXS},[`${d}-suffix`]:{position:"absolute",top:0,insetInlineEnd:n.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},wr=n=>{const{componentCls:i}=n;return{[`${i}-out-of-range`]:{[`&, & input, & textarea, ${i}-show-count-suffix, ${i}-data-count`]:{color:n.colorError}}}};var gt=(0,vt.I$)("Input",n=>{const i=(0,Ue.TS)(n,et(n));return[Vt(i),sr(i),dt(i),Pt(i),Ht(i),wr(i),(0,Tt.c)(i)]},rn,{resetFont:!1}),ar=n=>{const{getPrefixCls:i,direction:u}=(0,p.useContext)(Te.E_),{prefixCls:d,className:m}=n,E=i("input-group",d),x=i("input"),[R,z]=gt(x),_=b()(E,{[`${E}-lg`]:n.size==="large",[`${E}-sm`]:n.size==="small",[`${E}-compact`]:n.compact,[`${E}-rtl`]:u==="rtl"},z,m),N=(0,p.useContext)(Ce.aM),J=(0,p.useMemo)(()=>Object.assign(Object.assign({},N),{isFormItemInput:!1}),[N]);return R(p.createElement("span",{className:_,style:n.style,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onFocus:n.onFocus,onBlur:n.onBlur},p.createElement(Ce.aM.Provider,{value:J},n.children)))},De=w(1413),lt=w(87462),tt=w(4942),Zt=w(71002);function Ln(n){return!!(n.addonBefore||n.addonAfter)}function ir(n){return!!(n.prefix||n.suffix||n.allowClear)}function ln(n,i,u){var d=i.cloneNode(!0),m=Object.create(n,{target:{value:d},currentTarget:{value:d}});return d.value=u,typeof i.selectionStart=="number"&&typeof i.selectionEnd=="number"&&(d.selectionStart=i.selectionStart,d.selectionEnd=i.selectionEnd),d.setSelectionRange=function(){i.setSelectionRange.apply(i,arguments)},m}function cn(n,i,u,d){if(u){var m=i;if(i.type==="click"){m=ln(i,n,""),u(m);return}if(n.type!=="file"&&d!==void 0){m=ln(i,n,d),u(m);return}u(m)}}function Cr(n,i){if(n){n.focus(i);var u=i||{},d=u.cursor;if(d){var m=n.value.length;switch(d){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(m,m);break;default:n.setSelectionRange(0,m)}}}}var Xt=p.forwardRef(function(n,i){var u,d,m=n.inputElement,E=n.children,x=n.prefixCls,R=n.prefix,z=n.suffix,_=n.addonBefore,N=n.addonAfter,J=n.className,P=n.style,Q=n.disabled,C=n.readOnly,U=n.focused,H=n.triggerFocus,T=n.allowClear,te=n.value,I=n.handleReset,D=n.hidden,j=n.classes,B=n.classNames,ae=n.dataAttrs,M=n.styles,A=n.components,re=E!=null?E:m,ie=(A==null?void 0:A.affixWrapper)||"span",$=(A==null?void 0:A.groupWrapper)||"span",K=(A==null?void 0:A.wrapper)||"span",L=(A==null?void 0:A.groupAddon)||"span",ce=(0,p.useRef)(null),oe=function(_e){var Ve;(Ve=ce.current)!==null&&Ve!==void 0&&Ve.contains(_e.target)&&(H==null||H())},me=ir(n),de=(0,p.cloneElement)(re,{value:te,className:b()(re.props.className,!me&&(B==null?void 0:B.variant))||null}),pe=(0,p.useRef)(null);if(p.useImperativeHandle(i,function(){return{nativeElement:pe.current||ce.current}}),me){var Y,O=null;if(T){var W,V=!Q&&!C&&te,ne="".concat(x,"-clear-icon"),k=(0,Zt.Z)(T)==="object"&&T!==null&&T!==void 0&&T.clearIcon?T.clearIcon:"\u2716";O=p.createElement("span",{onClick:I,onMouseDown:function(_e){return _e.preventDefault()},className:b()(ne,(W={},(0,tt.Z)(W,"".concat(ne,"-hidden"),!V),(0,tt.Z)(W,"".concat(ne,"-has-suffix"),!!z),W)),role:"button",tabIndex:-1},k)}var ee="".concat(x,"-affix-wrapper"),F=b()(ee,(Y={},(0,tt.Z)(Y,"".concat(x,"-disabled"),Q),(0,tt.Z)(Y,"".concat(ee,"-disabled"),Q),(0,tt.Z)(Y,"".concat(ee,"-focused"),U),(0,tt.Z)(Y,"".concat(ee,"-readonly"),C),(0,tt.Z)(Y,"".concat(ee,"-input-with-clear-btn"),z&&T&&te),Y),j==null?void 0:j.affixWrapper,B==null?void 0:B.affixWrapper,B==null?void 0:B.variant),Se=(z||T)&&p.createElement("span",{className:b()("".concat(x,"-suffix"),B==null?void 0:B.suffix),style:M==null?void 0:M.suffix},O,z);de=p.createElement(ie,(0,lt.Z)({className:F,style:M==null?void 0:M.affixWrapper,onClick:oe},ae==null?void 0:ae.affixWrapper,{ref:ce}),R&&p.createElement("span",{className:b()("".concat(x,"-prefix"),B==null?void 0:B.prefix),style:M==null?void 0:M.prefix},R),de,Se)}if(Ln(n)){var be="".concat(x,"-group"),Ne="".concat(be,"-addon"),fe="".concat(be,"-wrapper"),Me=b()("".concat(x,"-wrapper"),be,j==null?void 0:j.wrapper,B==null?void 0:B.wrapper),Fe=b()(fe,(0,tt.Z)({},"".concat(fe,"-disabled"),Q),j==null?void 0:j.group,B==null?void 0:B.groupWrapper);de=p.createElement($,{className:Fe,ref:pe},p.createElement(K,{className:Me},_&&p.createElement(L,{className:Ne},_),de,N&&p.createElement(L,{className:Ne},N)))}return p.cloneElement(de,{className:b()((u=de.props)===null||u===void 0?void 0:u.className,J)||null,style:(0,De.Z)((0,De.Z)({},(d=de.props)===null||d===void 0?void 0:d.style),P),hidden:D})}),Ut=Xt,un=w(74902),at=w(97685),Wn=w(91),Et=w(21770),Dn=w(98423),Vn=["show"];function or(n,i){if(!i.max)return!0;var u=i.strategy(n);return u<=i.max}function dn(n,i){return p.useMemo(function(){var u={};i&&(u.show=(0,Zt.Z)(i)==="object"&&i.formatter?i.formatter:!!i),u=(0,De.Z)((0,De.Z)({},u),n);var d=u,m=d.show,E=(0,Wn.Z)(d,Vn);return(0,De.Z)((0,De.Z)({},E),{},{show:!!m,showFormatter:typeof m=="function"?m:void 0,strategy:E.strategy||function(x){return x.length}})},[n,i])}var Rt=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Sr=(0,p.forwardRef)(function(n,i){var u=n.autoComplete,d=n.onChange,m=n.onFocus,E=n.onBlur,x=n.onPressEnter,R=n.onKeyDown,z=n.prefixCls,_=z===void 0?"rc-input":z,N=n.disabled,J=n.htmlSize,P=n.className,Q=n.maxLength,C=n.suffix,U=n.showCount,H=n.count,T=n.type,te=T===void 0?"text":T,I=n.classes,D=n.classNames,j=n.styles,B=n.onCompositionStart,ae=n.onCompositionEnd,M=(0,Wn.Z)(n,Rt),A=(0,p.useState)(!1),re=(0,at.Z)(A,2),ie=re[0],$=re[1],K=(0,p.useRef)(!1),L=(0,p.useRef)(null),ce=(0,p.useRef)(null),oe=function(ve){L.current&&Cr(L.current,ve)},me=(0,Et.Z)(n.defaultValue,{value:n.value}),de=(0,at.Z)(me,2),pe=de[0],Y=de[1],O=pe==null?"":String(pe),W=(0,p.useState)(null),V=(0,at.Z)(W,2),ne=V[0],k=V[1],ee=dn(H,U),F=ee.max||Q,Se=ee.strategy(O),be=!!F&&Se>F;(0,p.useImperativeHandle)(i,function(){var Ie;return{focus:oe,blur:function(){var Pe;(Pe=L.current)===null||Pe===void 0||Pe.blur()},setSelectionRange:function(Pe,wt,jt){var pt;(pt=L.current)===null||pt===void 0||pt.setSelectionRange(Pe,wt,jt)},select:function(){var Pe;(Pe=L.current)===null||Pe===void 0||Pe.select()},input:L.current,nativeElement:((Ie=ce.current)===null||Ie===void 0?void 0:Ie.nativeElement)||L.current}}),(0,p.useEffect)(function(){$(function(Ie){return Ie&&N?!1:Ie})},[N]);var Ne=function(ve,Pe,wt){var jt=Pe;if(!K.current&&ee.exceedFormatter&&ee.max&&ee.strategy(Pe)>ee.max){if(jt=ee.exceedFormatter(Pe,{max:ee.max}),Pe!==jt){var pt,At;k([((pt=L.current)===null||pt===void 0?void 0:pt.selectionStart)||0,((At=L.current)===null||At===void 0?void 0:At.selectionEnd)||0])}}else if(wt.source==="compositionEnd")return;Y(jt),L.current&&cn(L.current,ve,d,jt)};(0,p.useEffect)(function(){if(ne){var Ie;(Ie=L.current)===null||Ie===void 0||Ie.setSelectionRange.apply(Ie,(0,un.Z)(ne))}},[ne]);var fe=function(ve){Ne(ve,ve.target.value,{source:"change"})},Me=function(ve){K.current=!1,Ne(ve,ve.currentTarget.value,{source:"compositionEnd"}),ae==null||ae(ve)},Fe=function(ve){x&&ve.key==="Enter"&&x(ve),R==null||R(ve)},Be=function(ve){$(!0),m==null||m(ve)},_e=function(ve){$(!1),E==null||E(ve)},Ve=function(ve){Y(""),oe(),L.current&&cn(L.current,ve,d)},yt=be&&"".concat(_,"-out-of-range"),Je=function(){var ve=(0,Dn.Z)(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return p.createElement("input",(0,lt.Z)({autoComplete:u},ve,{onChange:fe,onFocus:Be,onBlur:_e,onKeyDown:Fe,className:b()(_,(0,tt.Z)({},"".concat(_,"-disabled"),N),D==null?void 0:D.input),style:j==null?void 0:j.input,ref:L,size:J,type:te,onCompositionStart:function(wt){K.current=!0,B==null||B(wt)},onCompositionEnd:Me}))},It=function(){var ve=Number(F)>0;if(C||ee.show){var Pe=ee.showFormatter?ee.showFormatter({value:O,count:Se,maxLength:F}):"".concat(Se).concat(ve?" / ".concat(F):"");return p.createElement(p.Fragment,null,ee.show&&p.createElement("span",{className:b()("".concat(_,"-show-count-suffix"),(0,tt.Z)({},"".concat(_,"-show-count-has-suffix"),!!C),D==null?void 0:D.count),style:(0,De.Z)({},j==null?void 0:j.count)},Pe),C)}return null};return p.createElement(Ut,(0,lt.Z)({},M,{prefixCls:_,className:b()(P,yt),handleReset:Ve,value:O,focused:ie,triggerFocus:oe,suffix:It(),disabled:N,classes:I,classNames:D,styles:j}),Je())}),lr=Sr,fn=lr,hn=w(42550),mn=w(4340),gn=n=>{let i;return typeof n=="object"&&(n!=null&&n.clearIcon)?i=n:n&&(i={clearIcon:p.createElement(mn.Z,null)}),i};const Pr=null;function pn(n,i,u){return b()({[`${n}-status-success`]:i==="success",[`${n}-status-warning`]:i==="warning",[`${n}-status-error`]:i==="error",[`${n}-status-validating`]:i==="validating",[`${n}-has-feedback`]:u})}const Hn=(n,i)=>i||n;var nt=w(98866),Zn=w(35792),bn=w(98675);const cr=["outlined","borderless","filled"];var vn=function(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const u=(0,p.useContext)(Ce.pg);let d;typeof n!="undefined"?d=n:i===!1?d="borderless":d=u!=null?u:"outlined";const m=cr.includes(d);return[d,m]},yn=w(4173);function ur(n,i){const u=(0,p.useRef)([]),d=()=>{u.current.push(setTimeout(()=>{var m,E,x,R;!((m=n.current)===null||m===void 0)&&m.input&&((E=n.current)===null||E===void 0?void 0:E.input.getAttribute("type"))==="password"&&(!((x=n.current)===null||x===void 0)&&x.input.hasAttribute("value"))&&((R=n.current)===null||R===void 0||R.input.removeAttribute("value"))}))};return(0,p.useEffect)(()=>(i&&d(),()=>u.current.forEach(m=>{m&&clearTimeout(m)})),[]),d}function xr(n){return!!(n.prefix||n.suffix||n.allowClear||n.showCount)}var $r=function(n,i){var u={};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&i.indexOf(d)<0&&(u[d]=n[d]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(n);m<d.length;m++)i.indexOf(d[m])<0&&Object.prototype.propertyIsEnumerable.call(n,d[m])&&(u[d[m]]=n[d[m]]);return u};function Mt(n,i){if(!n)return;n.focus(i);const{cursor:u}=i||{};if(u){const d=n.value.length;switch(u){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(d,d);break;default:n.setSelectionRange(0,d)}}}var Bt=(0,p.forwardRef)((n,i)=>{var u;const{prefixCls:d,bordered:m=!0,status:E,size:x,disabled:R,onBlur:z,onFocus:_,suffix:N,allowClear:J,addonAfter:P,addonBefore:Q,className:C,style:U,styles:H,rootClassName:T,onChange:te,classNames:I,variant:D}=n,j=$r(n,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:B,direction:ae,input:M}=p.useContext(Te.E_),A=B("input",d),re=(0,p.useRef)(null),ie=(0,Zn.Z)(A),[$,K,L]=gt(A,ie),{compactSize:ce,compactItemClassnames:oe}=(0,yn.ri)(A,ae),me=(0,bn.Z)(_e=>{var Ve;return(Ve=x!=null?x:ce)!==null&&Ve!==void 0?Ve:_e}),de=p.useContext(nt.Z),pe=R!=null?R:de,{status:Y,hasFeedback:O,feedbackIcon:W}=(0,p.useContext)(Ce.aM),V=Hn(Y,E),ne=xr(n)||!!O,k=(0,p.useRef)(ne),ee=ur(re,!0),F=_e=>{ee(),z==null||z(_e)},Se=_e=>{ee(),_==null||_(_e)},be=_e=>{ee(),te==null||te(_e)},Ne=(O||N)&&p.createElement(p.Fragment,null,N,O&&W),fe=_e=>_e&&p.createElement(yn.BR,null,p.createElement(Ce.Ux,{override:!0,status:!0},_e)),Me=gn(J!=null?J:M==null?void 0:M.allowClear),[Fe,Be]=vn(D,m);return $(p.createElement(fn,Object.assign({ref:(0,hn.sQ)(i,re),prefixCls:A,autoComplete:M==null?void 0:M.autoComplete},j,{disabled:pe,onBlur:F,onFocus:Se,style:Object.assign(Object.assign({},M==null?void 0:M.style),U),styles:Object.assign(Object.assign({},M==null?void 0:M.styles),H),suffix:Ne,allowClear:Me,className:b()(C,T,L,ie,oe,M==null?void 0:M.className),onChange:be,addonBefore:fe(Q),addonAfter:fe(P),classNames:Object.assign(Object.assign(Object.assign({},I),M==null?void 0:M.classNames),{input:b()({[`${A}-sm`]:me==="small",[`${A}-lg`]:me==="large",[`${A}-rtl`]:ae==="rtl"},I==null?void 0:I.input,(u=M==null?void 0:M.classNames)===null||u===void 0?void 0:u.input,K),variant:b()({[`${A}-${Fe}`]:Be},pn(A,V)),affixWrapper:b()({[`${A}-affix-wrapper-sm`]:me==="small",[`${A}-affix-wrapper-lg`]:me==="large",[`${A}-affix-wrapper-rtl`]:ae==="rtl"},K),wrapper:b()({[`${A}-group-rtl`]:ae==="rtl"},K),groupWrapper:b()({[`${A}-group-wrapper-sm`]:me==="small",[`${A}-group-wrapper-lg`]:me==="large",[`${A}-group-wrapper-rtl`]:ae==="rtl",[`${A}-group-wrapper-${Fe}`]:Be},pn(`${A}-group-wrapper`,V,O),K)})})))}),Er=w(56790),wn=w(64217);const Rr=n=>{const{componentCls:i,paddingXS:u}=n;return{[`${i}`]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:u,"&-rtl":{direction:"rtl"},[`${i}-input`]:{textAlign:"center",paddingInline:n.paddingXXS},[`&${i}-sm ${i}-input`]:{paddingInline:n.calc(n.paddingXXS).div(2).equal()},[`&${i}-lg ${i}-input`]:{paddingInline:n.paddingXS}}}};var Ir=(0,vt.I$)(["Input","OTP"],n=>{const i=(0,Ue.TS)(n,et(n));return[Rr(i)]},rn),fr=w(75164),Yr=function(n,i){var u={};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&i.indexOf(d)<0&&(u[d]=n[d]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(n);m<d.length;m++)i.indexOf(d[m])<0&&Object.prototype.propertyIsEnumerable.call(n,d[m])&&(u[d[m]]=n[d[m]]);return u},kr=p.forwardRef((n,i)=>{const{value:u,onChange:d,onActiveChange:m,index:E,mask:x}=n,R=Yr(n,["value","onChange","onActiveChange","index","mask"]),z=u&&typeof x=="string"?x:u,_=C=>{d(E,C.target.value)},N=p.useRef(null);p.useImperativeHandle(i,()=>N.current);const J=()=>{(0,fr.Z)(()=>{var C;const U=(C=N.current)===null||C===void 0?void 0:C.input;document.activeElement===U&&U&&U.select()})},P=C=>{let{key:U}=C;U==="ArrowLeft"?m(E-1):U==="ArrowRight"&&m(E+1),J()},Q=C=>{C.key==="Backspace"&&!u&&m(E-1),J()};return p.createElement(Bt,Object.assign({},R,{ref:N,value:z,onInput:_,onFocus:J,onKeyDown:P,onKeyUp:Q,onMouseDown:J,onMouseUp:J,type:x===!0?"password":"text"}))}),hr=function(n,i){var u={};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&i.indexOf(d)<0&&(u[d]=n[d]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(n);m<d.length;m++)i.indexOf(d[m])<0&&Object.prototype.propertyIsEnumerable.call(n,d[m])&&(u[d[m]]=n[d[m]]);return u};function qt(n){return(n||"").split("")}var zt=p.forwardRef((n,i)=>{const{prefixCls:u,length:d=6,size:m,defaultValue:E,value:x,onChange:R,formatter:z,variant:_,disabled:N,status:J,autoFocus:P,mask:Q}=n,C=hr(n,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask"]),{getPrefixCls:U,direction:H}=p.useContext(Te.E_),T=U("otp",u),te=(0,wn.Z)(C,{aria:!0,data:!0,attr:!0}),I=(0,Zn.Z)(T),[D,j,B]=Ir(T,I),ae=(0,bn.Z)(O=>m!=null?m:O),M=p.useContext(Ce.aM),A=Hn(M.status,J),re=p.useMemo(()=>Object.assign(Object.assign({},M),{status:A,hasFeedback:!1,feedbackIcon:null}),[M,A]),ie=p.useRef(null),$=p.useRef({});p.useImperativeHandle(i,()=>({focus:()=>{var O;(O=$.current[0])===null||O===void 0||O.focus()},blur:()=>{var O;for(let W=0;W<d;W+=1)(O=$.current[W])===null||O===void 0||O.blur()},nativeElement:ie.current}));const K=O=>z?z(O):O,[L,ce]=p.useState(qt(K(E||"")));p.useEffect(()=>{x!==void 0&&ce(qt(x))},[x]);const oe=(0,Er.zX)(O=>{ce(O),R&&O.length===d&&O.every(W=>W)&&O.some((W,V)=>L[V]!==W)&&R(O.join(""))}),me=(0,Er.zX)((O,W)=>{let V=(0,un.Z)(L);for(let k=0;k<O;k+=1)V[k]||(V[k]="");W.length<=1?V[O]=W:V=V.slice(0,O).concat(qt(W)),V=V.slice(0,d);for(let k=V.length-1;k>=0&&!V[k];k-=1)V.pop();const ne=K(V.map(k=>k||" ").join(""));return V=qt(ne).map((k,ee)=>k===" "&&!V[ee]?V[ee]:k),V}),de=(O,W)=>{var V;const ne=me(O,W),k=Math.min(O+W.length,d-1);k!==O&&((V=$.current[k])===null||V===void 0||V.focus()),oe(ne)},pe=O=>{var W;(W=$.current[O])===null||W===void 0||W.focus()},Y={variant:_,disabled:N,status:A,mask:Q};return D(p.createElement("div",Object.assign({},te,{ref:ie,className:b()(T,{[`${T}-sm`]:ae==="small",[`${T}-lg`]:ae==="large",[`${T}-rtl`]:H==="rtl"},B,j)}),p.createElement(Ce.aM.Provider,{value:re},Array.from({length:d}).map((O,W)=>{const V=`otp-${W}`,ne=L[W]||"";return p.createElement(kr,Object.assign({ref:k=>{$.current[W]=k},key:V,index:W,size:ae,htmlSize:1,className:`${T}-input`,onChange:de,value:ne,onActiveChange:pe,autoFocus:W===0&&P},Y))}))))}),Fr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},gr=Fr,Xn=w(84089),jr=function(i,u){return p.createElement(Xn.Z,(0,lt.Z)({},i,{ref:u,icon:gr}))},es=p.forwardRef(jr),pr=es,Un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},ft=Un,Re=function(i,u){return p.createElement(Xn.Z,(0,lt.Z)({},i,{ref:u,icon:ft}))},Cn=p.forwardRef(Re),Sn=Cn,xn=function(n,i){var u={};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&i.indexOf(d)<0&&(u[d]=n[d]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(n);m<d.length;m++)i.indexOf(d[m])<0&&Object.prototype.propertyIsEnumerable.call(n,d[m])&&(u[d[m]]=n[d[m]]);return u};const $n=n=>n?p.createElement(Sn,null):p.createElement(pr,null),En={click:"onClick",hover:"onMouseOver"};var Gn=p.forwardRef((n,i)=>{const{disabled:u,action:d="click",visibilityToggle:m=!0,iconRender:E=$n}=n,x=typeof m=="object"&&m.visible!==void 0,[R,z]=(0,p.useState)(()=>x?m.visible:!1),_=(0,p.useRef)(null);p.useEffect(()=>{x&&z(m.visible)},[x,m]);const N=ur(_),J=()=>{u||(R&&N(),z(M=>{var A;const re=!M;return typeof m=="object"&&((A=m.onVisibleChange)===null||A===void 0||A.call(m,re)),re}))},P=M=>{const A=En[d]||"",re=E(R),ie={[A]:J,className:`${M}-icon`,key:"passwordIcon",onMouseDown:$=>{$.preventDefault()},onMouseUp:$=>{$.preventDefault()}};return p.cloneElement(p.isValidElement(re)?re:p.createElement("span",null,re),ie)},{className:Q,prefixCls:C,inputPrefixCls:U,size:H}=n,T=xn(n,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:te}=p.useContext(Te.E_),I=te("input",U),D=te("input-password",C),j=m&&P(D),B=b()(D,Q,{[`${D}-${H}`]:!!H}),ae=Object.assign(Object.assign({},(0,Dn.Z)(T,["suffix","iconRender","visibilityToggle"])),{type:R?"text":"password",className:B,prefixCls:I,suffix:j});return H&&(ae.size=H),p.createElement(Bt,Object.assign({ref:(0,hn.sQ)(i,_)},ae))}),In={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},An=In,On=function(i,u){return p.createElement(Xn.Z,(0,lt.Z)({},i,{ref:u,icon:An}))},_n=p.forwardRef(On),qn=_n,Jt=w(96159),Jn=w(29680),Pn=function(n,i){var u={};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&i.indexOf(d)<0&&(u[d]=n[d]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(n);m<d.length;m++)i.indexOf(d[m])<0&&Object.prototype.propertyIsEnumerable.call(n,d[m])&&(u[d[m]]=n[d[m]]);return u},Mn=p.forwardRef((n,i)=>{const{prefixCls:u,inputPrefixCls:d,className:m,size:E,suffix:x,enterButton:R=!1,addonAfter:z,loading:_,disabled:N,onSearch:J,onChange:P,onCompositionStart:Q,onCompositionEnd:C}=n,U=Pn(n,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:H,direction:T}=p.useContext(Te.E_),te=p.useRef(!1),I=H("input-search",u),D=H("input",d),{compactSize:j}=(0,yn.ri)(I,T),B=(0,bn.Z)(Y=>{var O;return(O=E!=null?E:j)!==null&&O!==void 0?O:Y}),ae=p.useRef(null),M=Y=>{Y&&Y.target&&Y.type==="click"&&J&&J(Y.target.value,Y,{source:"clear"}),P&&P(Y)},A=Y=>{var O;document.activeElement===((O=ae.current)===null||O===void 0?void 0:O.input)&&Y.preventDefault()},re=Y=>{var O,W;J&&J((W=(O=ae.current)===null||O===void 0?void 0:O.input)===null||W===void 0?void 0:W.value,Y,{source:"input"})},ie=Y=>{te.current||_||re(Y)},$=typeof R=="boolean"?p.createElement(qn,null):null,K=`${I}-button`;let L;const ce=R||{},oe=ce.type&&ce.type.__ANT_BUTTON===!0;oe||ce.type==="button"?L=(0,Jt.Tm)(ce,Object.assign({onMouseDown:A,onClick:Y=>{var O,W;(W=(O=ce==null?void 0:ce.props)===null||O===void 0?void 0:O.onClick)===null||W===void 0||W.call(O,Y),re(Y)},key:"enterButton"},oe?{className:K,size:B}:{})):L=p.createElement(Jn.ZP,{className:K,type:R?"primary":void 0,size:B,disabled:N,key:"enterButton",onMouseDown:A,onClick:re,loading:_,icon:$},R),z&&(L=[L,(0,Jt.Tm)(z,{key:"addonAfter"})]);const me=b()(I,{[`${I}-rtl`]:T==="rtl",[`${I}-${B}`]:!!B,[`${I}-with-button`]:!!R},m),de=Y=>{te.current=!0,Q==null||Q(Y)},pe=Y=>{te.current=!1,C==null||C(Y)};return p.createElement(Bt,Object.assign({ref:(0,hn.sQ)(ae,i),onPressEnter:ie},U,{size:B,onCompositionStart:de,onCompositionEnd:pe,prefixCls:D,addonAfter:L,suffix:x,onChange:M,className:me,disabled:N}))}),Kn=w(9220),Kt=w(8410),Fn=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,jn=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Qt={},ct;function Tr(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=n.getAttribute("id")||n.getAttribute("data-reactid")||n.getAttribute("name");if(i&&Qt[u])return Qt[u];var d=window.getComputedStyle(n),m=d.getPropertyValue("box-sizing")||d.getPropertyValue("-moz-box-sizing")||d.getPropertyValue("-webkit-box-sizing"),E=parseFloat(d.getPropertyValue("padding-bottom"))+parseFloat(d.getPropertyValue("padding-top")),x=parseFloat(d.getPropertyValue("border-bottom-width"))+parseFloat(d.getPropertyValue("border-top-width")),R=jn.map(function(_){return"".concat(_,":").concat(d.getPropertyValue(_))}).join(";"),z={sizingStyle:R,paddingSize:E,borderSize:x,boxSizing:m};return i&&u&&(Qt[u]=z),z}function Nr(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;ct||(ct=document.createElement("textarea"),ct.setAttribute("tab-index","-1"),ct.setAttribute("aria-hidden","true"),document.body.appendChild(ct)),n.getAttribute("wrap")?ct.setAttribute("wrap",n.getAttribute("wrap")):ct.removeAttribute("wrap");var m=Tr(n,i),E=m.paddingSize,x=m.borderSize,R=m.boxSizing,z=m.sizingStyle;ct.setAttribute("style","".concat(z,";").concat(Fn)),ct.value=n.value||n.placeholder||"";var _=void 0,N=void 0,J,P=ct.scrollHeight;if(R==="border-box"?P+=x:R==="content-box"&&(P-=E),u!==null||d!==null){ct.value=" ";var Q=ct.scrollHeight-E;u!==null&&(_=Q*u,R==="border-box"&&(_=_+E+x),P=Math.max(_,P)),d!==null&&(N=Q*d,R==="border-box"&&(N=N+E+x),J=P>N?"":"hidden",P=Math.min(N,P))}var C={height:P,overflowY:J,resize:"none"};return _&&(C.minHeight=_),N&&(C.maxHeight=N),C}var Ft=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Tn=0,Yt=1,vr=2,ht=p.forwardRef(function(n,i){var u=n,d=u.prefixCls,m=u.onPressEnter,E=u.defaultValue,x=u.value,R=u.autoSize,z=u.onResize,_=u.className,N=u.style,J=u.disabled,P=u.onChange,Q=u.onInternalAutoSize,C=(0,Wn.Z)(u,Ft),U=(0,Et.Z)(E,{value:x,postState:function(ee){return ee!=null?ee:""}}),H=(0,at.Z)(U,2),T=H[0],te=H[1],I=function(ee){te(ee.target.value),P==null||P(ee)},D=p.useRef();p.useImperativeHandle(i,function(){return{textArea:D.current}});var j=p.useMemo(function(){return R&&(0,Zt.Z)(R)==="object"?[R.minRows,R.maxRows]:[]},[R]),B=(0,at.Z)(j,2),ae=B[0],M=B[1],A=!!R,re=function(){try{if(document.activeElement===D.current){var ee=D.current,F=ee.selectionStart,Se=ee.selectionEnd,be=ee.scrollTop;D.current.setSelectionRange(F,Se),D.current.scrollTop=be}}catch(Ne){}},ie=p.useState(vr),$=(0,at.Z)(ie,2),K=$[0],L=$[1],ce=p.useState(),oe=(0,at.Z)(ce,2),me=oe[0],de=oe[1],pe=function(){L(Tn)};(0,Kt.Z)(function(){A&&pe()},[x,ae,M,A]),(0,Kt.Z)(function(){if(K===Tn)L(Yt);else if(K===Yt){var k=Nr(D.current,!1,ae,M);L(vr),de(k)}else re()},[K]);var Y=p.useRef(),O=function(){fr.Z.cancel(Y.current)},W=function(ee){K===vr&&(z==null||z(ee),R&&(O(),Y.current=(0,fr.Z)(function(){pe()})))};p.useEffect(function(){return O},[]);var V=A?me:null,ne=(0,De.Z)((0,De.Z)({},N),V);return(K===Tn||K===Yt)&&(ne.overflowY="hidden",ne.overflowX="hidden"),p.createElement(Kn.Z,{onResize:W,disabled:!(R||z)},p.createElement("textarea",(0,lt.Z)({},C,{ref:D,style:ne,className:b()(d,_,(0,tt.Z)({},"".concat(d,"-disabled"),J)),disabled:J,value:T,onChange:I})))}),he=ht,qe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","readOnly"],Nn=p.forwardRef(function(n,i){var u,d=n.defaultValue,m=n.value,E=n.onFocus,x=n.onBlur,R=n.onChange,z=n.allowClear,_=n.maxLength,N=n.onCompositionStart,J=n.onCompositionEnd,P=n.suffix,Q=n.prefixCls,C=Q===void 0?"rc-textarea":Q,U=n.showCount,H=n.count,T=n.className,te=n.style,I=n.disabled,D=n.hidden,j=n.classNames,B=n.styles,ae=n.onResize,M=n.readOnly,A=(0,Wn.Z)(n,qe),re=(0,Et.Z)(d,{value:m,defaultValue:d}),ie=(0,at.Z)(re,2),$=ie[0],K=ie[1],L=$==null?"":String($),ce=p.useState(!1),oe=(0,at.Z)(ce,2),me=oe[0],de=oe[1],pe=p.useRef(!1),Y=p.useState(null),O=(0,at.Z)(Y,2),W=O[0],V=O[1],ne=(0,p.useRef)(null),k=(0,p.useRef)(null),ee=function(){var Ae;return(Ae=k.current)===null||Ae===void 0?void 0:Ae.textArea},F=function(){ee().focus()};(0,p.useImperativeHandle)(i,function(){var He;return{resizableTextArea:k.current,focus:F,blur:function(){ee().blur()},nativeElement:((He=ne.current)===null||He===void 0?void 0:He.nativeElement)||ee()}}),(0,p.useEffect)(function(){de(function(He){return!I&&He})},[I]);var Se=p.useState(null),be=(0,at.Z)(Se,2),Ne=be[0],fe=be[1];p.useEffect(function(){if(Ne){var He;(He=ee()).setSelectionRange.apply(He,(0,un.Z)(Ne))}},[Ne]);var Me=dn(H,U),Fe=(u=Me.max)!==null&&u!==void 0?u:_,Be=Number(Fe)>0,_e=Me.strategy(L),Ve=!!Fe&&_e>Fe,yt=function(Ae,We){var Ct=We;!pe.current&&Me.exceedFormatter&&Me.max&&Me.strategy(We)>Me.max&&(Ct=Me.exceedFormatter(We,{max:Me.max}),We!==Ct&&fe([ee().selectionStart||0,ee().selectionEnd||0])),K(Ct),cn(Ae.currentTarget,Ae,R,Ct)},Je=function(Ae){pe.current=!0,N==null||N(Ae)},It=function(Ae){pe.current=!1,yt(Ae,Ae.currentTarget.value),J==null||J(Ae)},Ie=function(Ae){yt(Ae,Ae.target.value)},ve=function(Ae){var We=A.onPressEnter,Ct=A.onKeyDown;Ae.key==="Enter"&&We&&We(Ae),Ct==null||Ct(Ae)},Pe=function(Ae){de(!0),E==null||E(Ae)},wt=function(Ae){de(!1),x==null||x(Ae)},jt=function(Ae){K(""),F(),cn(ee(),Ae,R)},pt=P,At;Me.show&&(Me.showFormatter?At=Me.showFormatter({value:L,count:_e,maxLength:Fe}):At="".concat(_e).concat(Be?" / ".concat(Fe):""),pt=p.createElement(p.Fragment,null,pt,p.createElement("span",{className:b()("".concat(C,"-data-count"),j==null?void 0:j.count),style:B==null?void 0:B.count},At)));var Br=function(Ae){var We;ae==null||ae(Ae),(We=ee())!==null&&We!==void 0&&We.style.height&&V(!0)},zr=!A.autoSize&&!U&&!z;return p.createElement(Ut,{ref:ne,value:L,allowClear:z,handleReset:jt,suffix:pt,prefixCls:C,classNames:(0,De.Z)((0,De.Z)({},j),{},{affixWrapper:b()(j==null?void 0:j.affixWrapper,(0,tt.Z)((0,tt.Z)({},"".concat(C,"-show-count"),U),"".concat(C,"-textarea-allow-clear"),z))}),disabled:I,focused:me,className:b()(T,Ve&&"".concat(C,"-out-of-range")),style:(0,De.Z)((0,De.Z)({},te),W&&!zr?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof At=="string"?At:void 0}},hidden:D,readOnly:M},p.createElement(he,(0,lt.Z)({},A,{maxLength:_,onKeyDown:ve,onChange:Ie,onFocus:Pe,onBlur:wt,onCompositionStart:Je,onCompositionEnd:It,className:b()(j==null?void 0:j.textarea),style:(0,De.Z)((0,De.Z)({},B==null?void 0:B.textarea),{},{resize:te==null?void 0:te.resize}),disabled:I,prefixCls:C,onResize:Br,ref:k,readOnly:M})))}),ut=Nn,kt=ut,o=function(n,i){var u={};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&i.indexOf(d)<0&&(u[d]=n[d]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(n);m<d.length;m++)i.indexOf(d[m])<0&&Object.prototype.propertyIsEnumerable.call(n,d[m])&&(u[d[m]]=n[d[m]]);return u},h=(0,p.forwardRef)((n,i)=>{var u,d;const{prefixCls:m,bordered:E=!0,size:x,disabled:R,status:z,allowClear:_,classNames:N,rootClassName:J,className:P,style:Q,styles:C,variant:U}=n,H=o(n,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:T,direction:te,textArea:I}=p.useContext(Te.E_),D=(0,bn.Z)(x),j=p.useContext(nt.Z),B=R!=null?R:j,{status:ae,hasFeedback:M,feedbackIcon:A}=p.useContext(Ce.aM),re=Hn(ae,z),ie=p.useRef(null);p.useImperativeHandle(i,()=>{var Y;return{resizableTextArea:(Y=ie.current)===null||Y===void 0?void 0:Y.resizableTextArea,focus:O=>{var W,V;Mt((V=(W=ie.current)===null||W===void 0?void 0:W.resizableTextArea)===null||V===void 0?void 0:V.textArea,O)},blur:()=>{var O;return(O=ie.current)===null||O===void 0?void 0:O.blur()}}});const $=T("input",m),K=(0,Zn.Z)($),[L,ce,oe]=gt($,K),[me,de]=vn(U,E),pe=gn(_!=null?_:I==null?void 0:I.allowClear);return L(p.createElement(kt,Object.assign({autoComplete:I==null?void 0:I.autoComplete},H,{style:Object.assign(Object.assign({},I==null?void 0:I.style),Q),styles:Object.assign(Object.assign({},I==null?void 0:I.styles),C),disabled:B,allowClear:pe,className:b()(oe,K,P,J,I==null?void 0:I.className),classNames:Object.assign(Object.assign(Object.assign({},N),I==null?void 0:I.classNames),{textarea:b()({[`${$}-sm`]:D==="small",[`${$}-lg`]:D==="large"},ce,N==null?void 0:N.textarea,(u=I==null?void 0:I.classNames)===null||u===void 0?void 0:u.textarea),variant:b()({[`${$}-${me}`]:de},pn($,re)),affixWrapper:b()(`${$}-textarea-affix-wrapper`,{[`${$}-affix-wrapper-rtl`]:te==="rtl",[`${$}-affix-wrapper-sm`]:D==="small",[`${$}-affix-wrapper-lg`]:D==="large",[`${$}-textarea-show-count`]:n.showCount||((d=n.count)===null||d===void 0?void 0:d.show)},ce)}),prefixCls:$,suffix:M&&p.createElement("span",{className:`${$}-textarea-suffix`},A),ref:ie})))});const f=Bt;f.Group=ar,f.Search=Mn,f.TextArea=h,f.Password=Gn,f.OTP=zt;var v=f},36542:function(ye,we,w){w.d(we,{Pp:function(){return Ke}});var p={};w.r(p),w.d(p,{APIConnectionError:function(){return Wt},APIConnectionTimeoutError:function(){return Ye},APIError:function(){return Le},APIUserAbortError:function(){return Ge},AuthenticationError:function(){return zn},BadRequestError:function(){return sn},ConflictError:function(){return Dt},InternalServerError:function(){return Vt},NotFoundError:function(){return an},OpenAIError:function(){return ge},PermissionDeniedError:function(){return nr},RateLimitError:function(){return on},UnprocessableEntityError:function(){return Nt}});const Oe="4.50.0";let b=!1,Te,Ce,ue=null,Xe=null,Tt=null,vt,Ue=null,et,rn,Yn,Lt,_t,kn;function yr(s,e={auto:!1}){if(b)throw new Error(`you must \`import 'openai/shims/${s.kind}'\` before importing anything else from openai`);if(Te)throw new Error(`can't \`import 'openai/shims/${s.kind}'\` after \`import 'openai/shims/${Te}'\``);b=e.auto,Te=s.kind,Ce=s.fetch,ue=s.Request,Xe=s.Response,Tt=s.Headers,vt=s.FormData,Ue=s.Blob,et=s.File,rn=s.ReadableStream,Yn=s.getMultipartRequestOptions,Lt=s.getDefaultAgent,_t=s.fileFromPath,kn=s.isFsReadStream}class er{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function tr({manuallyImported:s}={}){const e=s?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,a,l;try{t=fetch,r=Request,a=Response,l=Headers}catch(y){throw new Error(`this environment is missing the following Web Fetch API type: ${y.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:a,Headers:l,FormData:typeof FormData!="undefined"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob!="undefined"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File!="undefined"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream!="undefined"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:(y,Z)=>G(this,null,function*(){return S(g({},Z),{body:new er(y)})}),getDefaultAgent:y=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:y=>!1}}Te||yr(tr(),{auto:!0});class ge extends Error{}class Le extends ge{constructor(e,t,r,a){super(`${Le.makeMessage(e,t,r)}`),this.status=e,this.headers=a,this.request_id=a==null?void 0:a["x-request-id"];const l=t;this.error=l,this.code=l==null?void 0:l.code,this.param=l==null?void 0:l.param,this.type=l==null?void 0:l.type}static makeMessage(e,t,r){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,r,a){if(!e)return new Wt({cause:Bt(t)});const l=t==null?void 0:t.error;return e===400?new sn(e,l,r,a):e===401?new zn(e,l,r,a):e===403?new nr(e,l,r,a):e===404?new an(e,l,r,a):e===409?new Dt(e,l,r,a):e===422?new Nt(e,l,r,a):e===429?new on(e,l,r,a):e>=500?new Vt(e,l,r,a):new Le(e,l,r,a)}}class Ge extends Le{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Wt extends Le{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class Ye extends Wt{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}}class sn extends Le{constructor(){super(...arguments),this.status=400}}class zn extends Le{constructor(){super(...arguments),this.status=401}}class nr extends Le{constructor(){super(...arguments),this.status=403}}class an extends Le{constructor(){super(...arguments),this.status=404}}class Dt extends Le{constructor(){super(...arguments),this.status=409}}class Nt extends Le{constructor(){super(...arguments),this.status=422}}class on extends Le{constructor(){super(...arguments),this.status=429}}class Vt extends Le{}var rr=w(48764).lW;class dt{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;function a(){return nn(this,null,function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{try{for(var y=mt(Pt(e,t)),Z,q,le;Z=!(q=yield new st(y.next())).done;Z=!1){const X=q.value;if(!l){if(X.data.startsWith("[DONE]")){l=!0;continue}if(X.event===null){let se;try{se=JSON.parse(X.data)}catch(xe){throw console.error("Could not parse message into JSON:",X.data),console.error("From chunk:",X.raw),xe}if(se&&se.error)throw new Le(void 0,se.error,void 0,void 0);yield se}else{let se;try{se=JSON.parse(X.data)}catch(xe){throw console.error("Could not parse message into JSON:",X.data),console.error("From chunk:",X.raw),xe}if(X.event=="error")throw new Le(void 0,se.error,se.message,void 0);yield{event:X.event,data:se}}}}}catch(q){le=[q]}finally{try{Z&&(q=y.return)&&(yield new st(q.call(y)))}finally{if(le)throw le[0]}}l=!0}catch(X){if(X instanceof Error&&X.name==="AbortError")return;throw X}finally{l||t.abort()}})}return new dt(a,t)}static fromReadableStream(e,t){let r=!1;function a(){return nn(this,null,function*(){const y=new gt,Z=De(e);try{for(var q=mt(Z),le,X,se;le=!(X=yield new st(q.next())).done;le=!1){const xe=X.value;for(const Ze of y.decode(xe))yield Ze}}catch(X){se=[X]}finally{try{le&&(X=q.return)&&(yield new st(X.call(q)))}finally{if(se)throw se[0]}}for(const xe of y.flush())yield xe})}function l(){return nn(this,null,function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var Z=mt(a()),q,le,X;q=!(le=yield new st(Z.next())).done;q=!1){const se=le.value;y||se&&(yield JSON.parse(se))}}catch(le){X=[le]}finally{try{q&&(le=Z.return)&&(yield new st(le.call(Z)))}finally{if(X)throw X[0]}}y=!0}catch(se){if(se instanceof Error&&se.name==="AbortError")return;throw se}finally{y||t.abort()}})}return new dt(l,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),a=l=>({next:()=>{if(l.length===0){const y=r.next();e.push(y),t.push(y)}return l.shift()}});return[new dt(()=>a(e),this.controller),new dt(()=>a(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new rn({start(){return G(this,null,function*(){t=e[Symbol.asyncIterator]()})},pull(l){return G(this,null,function*(){try{const{value:y,done:Z}=yield t.next();if(Z)return l.close();const q=r.encode(JSON.stringify(y)+`
`);l.enqueue(q)}catch(y){l.error(y)}})},cancel(){return G(this,null,function*(){var l;yield(l=t.return)==null?void 0:l.call(t)})}})}}function Pt(s,e){return nn(this,null,function*(){if(!s.body)throw e.abort(),new ge("Attempted to iterate over a response with no body");const t=new wr,r=new gt,a=De(s.body);try{for(var l=mt(Ht(a)),y,Z,q;y=!(Z=yield new st(l.next())).done;y=!1){const le=Z.value;for(const X of r.decode(le)){const se=t.decode(X);se&&(yield se)}}}catch(Z){q=[Z]}finally{try{y&&(Z=l.return)&&(yield new st(Z.call(l)))}finally{if(q)throw q[0]}}for(const le of r.flush()){const X=t.decode(le);X&&(yield X)}})}function Ht(s){return nn(this,null,function*(){let e=new Uint8Array;try{for(var t=mt(s),r,a,l;r=!(a=yield new st(t.next())).done;r=!1){const y=a.value;if(y==null)continue;const Z=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?new TextEncoder().encode(y):y;let q=new Uint8Array(e.length+Z.length);q.set(e),q.set(Z,e.length),e=q;let le;for(;(le=sr(e))!==-1;)yield e.slice(0,le),e=e.slice(le)}}catch(a){l=[a]}finally{try{r&&(a=t.return)&&(yield new st(a.call(t)))}finally{if(l)throw l[0]}}e.length>0&&(yield e)})}function sr(s){for(let r=0;r<s.length-2;r++){if(s[r]===10&&s[r+1]===10||s[r]===13&&s[r+1]===13)return r+2;if(s[r]===13&&s[r+1]===10&&r+3<s.length&&s[r+2]===13&&s[r+3]===10)return r+4}return-1}class wr{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,a]=ar(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}class gt{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=gt.NEWLINE_CHARS.has(t[t.length-1]||"");let a=t.split(gt.NEWLINE_REGEXP);return r&&a.pop(),a.length===1&&!r?(this.buffer.push(a[0]),[]):(this.buffer.length>0&&(a=[this.buffer.join("")+a[0],...a.slice(1)],this.buffer=[]),r||(this.buffer=[a.pop()||""]),a)}decodeText(e){var t;if(e==null)return"";if(typeof e=="string")return e;if(typeof rr!="undefined"){if(e instanceof rr)return e.toString();if(e instanceof Uint8Array)return rr.from(e).toString();throw new ge(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!="undefined"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(t=this.textDecoder)!=null||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new ge(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new ge("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}gt.NEWLINE_CHARS=new Set([`
`,"\r"]),gt.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Or(s){const e=new gt,t=[];for(const r of s)t.push(...e.decode(r));return t}function ar(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}function De(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{next(){return G(this,null,function*(){try{const r=yield e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}})},return(){return G(this,null,function*(){const r=e.cancel();return e.releaseLock(),yield r,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}var lt=w(48764).lW;const tt=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",Zt=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Ln(s),Ln=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",ir=s=>Zt(s)||tt(s)||kn(s);function ln(s,e,t){return G(this,null,function*(){var a,l,y;if(s=yield s,t!=null||(t=Zt(s)?{lastModified:s.lastModified,type:s.type}:{}),tt(s)){const Z=yield s.blob();return e||(e=(a=new URL(s.url).pathname.split(/[\\/]/).pop())!=null?a:"unknown_file"),new et([Z],e,t)}const r=yield cn(s);if(e||(e=(l=Xt(s))!=null?l:"unknown_file"),!t.type){const Z=(y=r[0])==null?void 0:y.type;typeof Z=="string"&&(t=S(g({},t),{type:Z}))}return new et(r,e,t)})}function cn(s){return G(this,null,function*(){var y;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(Ln(s))e.push(yield s.arrayBuffer());else if(un(s))try{for(var t=mt(s),r,a,l;r=!(a=yield t.next()).done;r=!1){const Z=a.value;e.push(Z)}}catch(a){l=[a]}finally{try{r&&(a=t.return)&&(yield a.call(t))}finally{if(l)throw l[0]}}else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${(y=s==null?void 0:s.constructor)==null?void 0:y.name}; props: ${Cr(s)}`);return e})}function Cr(s){return`[${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}function Xt(s){var e;return Ut(s.name)||Ut(s.filename)||((e=Ut(s.path))==null?void 0:e.split(/[\\/]/).pop())}const Ut=s=>{if(typeof s=="string")return s;if(typeof lt!="undefined"&&s instanceof lt)return String(s)},un=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",at=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody",Wn=s=>G(this,null,function*(){if(!Vn(s.body))return s;const e=yield Dn(s.body);return getMultipartRequestOptions(e,s)}),Et=s=>G(this,null,function*(){const e=yield Dn(s.body);return Yn(e,s)}),Dn=s=>G(this,null,function*(){const e=new vt;return yield Promise.all(Object.entries(s||{}).map(([t,r])=>or(e,t,r))),e}),Vn=s=>{if(ir(s))return!0;if(Array.isArray(s))return s.some(Vn);if(s&&typeof s=="object"){for(const e in s)if(Vn(s[e]))return!0}return!1},or=(s,e,t)=>G(this,null,function*(){if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(ir(t)){const r=yield ln(t);s.append(e,r)}else if(Array.isArray(t))yield Promise.all(t.map(r=>or(s,e+"[]",r)));else if(typeof t=="object")yield Promise.all(Object.entries(t).map(([r,a])=>or(s,`${e}[${r}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}});var dn=w(48764).lW,Rt=w(34155),Sr=function(s,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(s,t):a?a.value=t:e.set(s,t),t},lr=function(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)},fn;function hn(s){return G(this,null,function*(){const{response:e}=s;if(s.options.stream)return zt("response",e.status,e.url,e.headers,e.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(e,s.controller):dt.fromSSEResponse(e,s.controller);if(e.status===204)return null;if(s.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const l=yield e.json();return zt("response",e.status,e.url,e.headers,l),l}const a=yield e.text();return zt("response",e.status,e.url,e.headers,a),a})}class mn extends Promise{constructor(e,t=hn){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new mn(this.responsePromise,t=>G(this,null,function*(){return e(yield this.parseResponse(t))}))}asResponse(){return this.responsePromise.then(e=>e.response)}withResponse(){return G(this,null,function*(){const[e,t]=yield Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}})}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class _r{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:a,fetch:l}){this.baseURL=e,this.maxRetries=dr("maxRetries",t),this.timeout=dr("timeout",r),this.httpAgent=a,this.fetch=l!=null?l:Ce}authHeaders(e){return{}}defaultHeaders(e){return g(g({Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent()},yn()),this.authHeaders(e))}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Fr()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(a=>G(this,null,function*(){const l=a&&Ln(a==null?void 0:a.body)?new DataView(yield a.body.arrayBuffer()):(a==null?void 0:a.body)instanceof DataView?a.body:(a==null?void 0:a.body)instanceof ArrayBuffer?new DataView(a.body):a&&ArrayBuffer.isView(a==null?void 0:a.body)?new DataView(a.body.buffer):a==null?void 0:a.body;return S(g({method:e,path:t},a),{body:l})})))}getAPIList(e,t,r){return this.requestAPIList(t,g({method:"get",path:e},r))}calculateContentLength(e){if(typeof e=="string"){if(typeof dn!="undefined")return dn.byteLength(e,"utf8").toString();if(typeof TextEncoder!="undefined")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){var Ee,$e,bt,ze,ke,Qe;const{method:t,path:r,query:a,headers:l={}}=e,y=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:at(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,Z=this.calculateContentLength(y),q=this.buildURL(r,a);"timeout"in e&&dr("timeout",e.timeout);const le=(Ee=e.timeout)!=null?Ee:this.timeout,X=(bt=($e=e.httpAgent)!=null?$e:this.httpAgent)!=null?bt:Lt(q),se=le+1e3;typeof((ze=X==null?void 0:X.options)==null?void 0:ze.timeout)=="number"&&se>((ke=X.options.timeout)!=null?ke:0)&&(X.options.timeout=se),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const xe=this.buildHeaders({options:e,headers:l,contentLength:Z});return{req:S(g(S(g({method:t},y&&{body:y}),{headers:xe}),X&&{agent:X}),{signal:(Qe=e.signal)!=null?Qe:null}),url:q,timeout:le}}buildHeaders({options:e,headers:t,contentLength:r}){const a={};r&&(a["content-length"]=r);const l=this.defaultHeaders(e);return mr(a,l),mr(a,t),at(e.body)&&Te!=="node"&&delete a["content-type"],this.validateHeaders(a,t),a}prepareOptions(e){return G(this,null,function*(){})}prepareRequest(a,l){return G(this,arguments,function*(e,{url:t,options:r}){})}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):g({},e):{}}makeStatusError(e,t,r,a){return Le.generate(e,t,r,a)}request(e,t=null){return new mn(this.makeRequest(e,t))}makeRequest(e,t){return G(this,null,function*(){var X,se,xe;const r=yield e;t==null&&(t=(X=r.maxRetries)!=null?X:this.maxRetries),yield this.prepareOptions(r);const{req:a,url:l,timeout:y}=this.buildRequest(r);if(yield this.prepareRequest(a,{url:l,options:r}),zt("request",l,r,a.headers),(se=r.signal)!=null&&se.aborted)throw new Ge;const Z=new AbortController,q=yield this.fetchWithTimeout(l,a,y,Z).catch(Bt);if(q instanceof Error){if((xe=r.signal)!=null&&xe.aborted)throw new Ge;if(t)return this.retryRequest(r,t);throw q.name==="AbortError"?new Ye:new Wt({cause:q})}const le=pn(q.headers);if(!q.ok){if(t&&this.shouldRetry(q)){const ke=`retrying, ${t} attempts remaining`;return zt(`response (error; ${ke})`,q.status,l,le),this.retryRequest(r,t,le)}const Ze=yield q.text().catch(ke=>Bt(ke).message),Ee=ur(Ze),$e=Ee?void 0:Ze;throw zt(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,q.status,l,le,$e),this.makeStatusError(q.status,Ee,$e,le)}return{response:q,options:r,controller:Z}})}requestAPIList(e,t){const r=this.makeRequest(t,null);return new Pr(this,r,e)}buildURL(e,t){const r=$r(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return hr(a)||(t=g(g({},a),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r!="undefined").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new ge(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}fetchWithTimeout(e,t,r,a){return G(this,null,function*(){const q=t||{},{signal:l}=q,y=ot(q,["signal"]);l&&l.addEventListener("abort",()=>a.abort());const Z=setTimeout(()=>a.abort(),r);return this.getRequestClient().fetch.call(void 0,e,g({signal:a.signal},y)).finally(()=>{clearTimeout(Z)})})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}retryRequest(e,t,r){return G(this,null,function*(){var Z;let a;const l=r==null?void 0:r["retry-after-ms"];if(l){const q=parseFloat(l);Number.isNaN(q)||(a=q)}const y=r==null?void 0:r["retry-after"];if(y&&!a){const q=parseFloat(y);Number.isNaN(q)?a=Date.parse(y)-Date.now():a=q*1e3}if(!(a&&0<=a&&a<60*1e3)){const q=(Z=e.maxRetries)!=null?Z:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,q)}return yield Mt(a),this.makeRequest(e,t-1)})}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,y=Math.min(.5*Math.pow(2,l),8),Z=1-Math.random()*.25;return y*Z*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Oe}`}}class gn{constructor(e,t,r,a){fn.set(this,void 0),Sr(this,fn,e,"f"),this.options=a,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}getNextPage(){return G(this,null,function*(){const e=this.nextPageInfo();if(!e)throw new ge("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t=g({},this.options);if("params"in e&&typeof t.query=="object")t.query=g(g({},t.query),e.params);else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[a,l]of r)e.url.searchParams.set(a,l);t.query=void 0,t.path=e.url.toString()}return yield lr(this,fn,"f").requestAPIList(this.constructor,t)})}iterPages(){return nn(this,null,function*(){let e=this;for(yield e;e.hasNextPage();)e=yield new st(e.getNextPage()),yield e})}[(fn=new WeakMap,Symbol.asyncIterator)](){return nn(this,null,function*(){try{for(var e=mt(this.iterPages()),t,r,a;t=!(r=yield new st(e.next())).done;t=!1){const l=r.value;for(const y of l.getPaginatedItems())yield y}}catch(r){a=[r]}finally{try{t&&(r=e.return)&&(yield new st(r.call(e)))}finally{if(a)throw a[0]}}})}}class Pr extends mn{constructor(e,t,r){super(t,a=>G(this,null,function*(){return new r(e,a.response,yield hn(a),a.options)}))}[Symbol.asyncIterator](){return nn(this,null,function*(){const e=yield new st(this);try{for(var t=mt(e),r,a,l;r=!(a=yield new st(t.next())).done;r=!1){const y=a.value;yield y}}catch(a){l=[a]}finally{try{r&&(a=t.return)&&(yield new st(a.call(t)))}finally{if(l)throw l[0]}}})}}const pn=s=>new Proxy(Object.fromEntries(s.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),Hn={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},nt=s=>typeof s=="object"&&s!==null&&!hr(s)&&Object.keys(s).every(e=>qt(Hn,e)),Zn=()=>{var e,t;if(typeof Deno!="undefined"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oe,"X-Stainless-OS":Gt(Deno.build.os),"X-Stainless-Arch":cr(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)==null?void 0:e.deno)!=null?t:"unknown"};if(typeof EdgeRuntime!="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":Rt.version};if(Object.prototype.toString.call(typeof Rt!="undefined"?Rt:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oe,"X-Stainless-OS":Gt(Rt.platform),"X-Stainless-Arch":cr(Rt.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":Rt.version};const s=bn();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function bn(){if(typeof navigator=="undefined"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const r=t.exec(navigator.userAgent);if(r){const a=r[1]||0,l=r[2]||0,y=r[3]||0;return{browser:e,version:`${a}.${l}.${y}`}}}return null}const cr=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",Gt=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let vn;const yn=()=>vn!=null?vn:vn=Zn(),ur=s=>{try{return JSON.parse(s)}catch(e){return}},xr=new RegExp("^(?:[a-z]+:)?//","i"),$r=s=>xr.test(s),Mt=s=>new Promise(e=>setTimeout(e,s)),dr=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ge(`${s} must be an integer`);if(e<0)throw new ge(`${s} must be a positive integer`);return e},Bt=s=>s instanceof Error?s:new Error(s),Er=s=>{if(s==null)throw new OpenAIError(`Expected a value to be given but received ${s} instead.`);return s},wn=s=>{var e,t,r,a,l;if(typeof Rt!="undefined")return(t=(e={NODE_ENV:"production",PUBLIC_PATH:"/"}[s])==null?void 0:e.trim())!=null?t:void 0;if(typeof Deno!="undefined")return(l=(a=(r=Deno.env)==null?void 0:r.get)==null?void 0:a.call(r,s))==null?void 0:l.trim()},Rr=s=>{if(typeof s=="number")return Math.round(s);if(typeof s=="string")return parseInt(s,10);throw new OpenAIError(`Could not coerce ${s} (type: ${typeof s}) into a number`)},Ir=s=>{if(typeof s=="number")return s;if(typeof s=="string")return parseFloat(s);throw new OpenAIError(`Could not coerce ${s} (type: ${typeof s}) into a number`)},fr=s=>typeof s=="boolean"?s:typeof s=="string"?s==="true":!!s,Yr=s=>{if(s!==void 0)return Rr(s)},Mr=s=>{if(s!==void 0)return Ir(s)},kr=s=>{if(s!==void 0)return fr(s)};function hr(s){if(!s)return!0;for(const e in s)return!1;return!0}function qt(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function mr(s,e){for(const t in e){if(!qt(e,t))continue;const r=t.toLowerCase();if(!r)continue;const a=e[t];a===null?delete s[r]:a!==void 0&&(s[r]=a)}}function zt(s,...e){typeof Rt!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${s}`,...e)}const Fr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)}),gr=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof navigator!="undefined",Xn=s=>typeof(s==null?void 0:s.get)=="function",jr=(s,e)=>{var r;const t=e.toLowerCase();if(Xn(s)){const a=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(l,y,Z)=>y+Z.toUpperCase());for(const l of[e,t,e.toUpperCase(),a]){const y=s.get(l);if(y)return y}}for(const[a,l]of Object.entries(s))if(a.toLowerCase()===t)return Array.isArray(l)?(l.length<=1||console.warn(`Received ${l.length} entries for the ${e} header, using the first entry.`),l[0]):l;throw new Error(`Could not find ${e} header`)},es=s=>{if(!s)return"";if(typeof dn!="undefined")return dn.from(s).toString("base64");if(typeof btoa!="undefined")return btoa(s);throw new OpenAIError("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")};function pr(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}class Un extends gn{constructor(e,t,r,a){super(e,t,r,a),this.data=r.data||[],this.object=r.object}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageParams(){return null}nextPageInfo(){return null}}class ft extends gn{constructor(e,t,r,a){super(e,t,r,a),this.data=r.data||[]}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class Re{constructor(e){this._client=e}}class Cn extends Re{create(e,t){var r;return this._client.post("/completions",S(g({body:e},t),{stream:(r=e.stream)!=null?r:!1}))}}Cn||(Cn={});class Sn extends Re{create(e,t){var r;return this._client.post("/chat/completions",S(g({body:e},t),{stream:(r=e.stream)!=null?r:!1}))}}Sn||(Sn={});class xn extends Re{constructor(){super(...arguments),this.completions=new Sn(this._client)}}(function(s){s.Completions=Sn})(xn||(xn={}));class $n extends Re{create(e,t){return this._client.post("/embeddings",g({body:e},t))}}$n||($n={});class En extends Re{create(e,t){return this._client.post("/files",Et(g({body:e},t)))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return nt(e)?this.list({},e):this._client.getAPIList("/files",Rn,g({query:e},t))}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,S(g({},t),{__binaryResponse:!0}))}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,S(g({},t),{headers:g({Accept:"application/json"},t==null?void 0:t.headers)}))}waitForProcessing(a){return G(this,arguments,function*(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const l=new Set(["processed","error","deleted"]),y=Date.now();let Z=yield this.retrieve(e);for(;!Z.status||!l.has(Z.status);)if(yield Mt(t),Z=yield this.retrieve(e),Date.now()-y>r)throw new Ye({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return Z})}}class Rn extends Un{}(function(s){s.FileObjectsPage=Rn})(En||(En={}));class Gn extends Re{createVariation(e,t){return this._client.post("/images/variations",Et(g({body:e},t)))}edit(e,t){return this._client.post("/images/edits",Et(g({body:e},t)))}generate(e,t){return this._client.post("/images/generations",g({body:e},t))}}Gn||(Gn={});class In extends Re{create(e,t){return this._client.post("/audio/speech",S(g({body:e},t),{__binaryResponse:!0}))}}In||(In={});class An extends Re{create(e,t){return this._client.post("/audio/transcriptions",Et(g({body:e},t)))}}An||(An={});class On extends Re{create(e,t){return this._client.post("/audio/translations",Et(g({body:e},t)))}}On||(On={});class _n extends Re{constructor(){super(...arguments),this.transcriptions=new An(this._client),this.translations=new On(this._client),this.speech=new In(this._client)}}(function(s){s.Transcriptions=An,s.Translations=On,s.Speech=In})(_n||(_n={}));class qn extends Re{create(e,t){return this._client.post("/moderations",g({body:e},t))}}qn||(qn={});class Jt extends Re{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Jn,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Jn extends Un{}(function(s){s.ModelsPage=Jn})(Jt||(Jt={}));class Pn extends Re{list(e,t={},r){return nt(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,br,g({query:t},r))}}class br extends ft{}(function(s){s.FineTuningJobCheckpointsPage=br})(Pn||(Pn={}));class Mn extends Re{constructor(){super(...arguments),this.checkpoints=new Pn(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",g({body:e},t))}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return nt(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Kn,g({query:e},t))}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return nt(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Kt,g({query:t},r))}}class Kn extends ft{}class Kt extends ft{}(function(s){s.FineTuningJobsPage=Kn,s.FineTuningJobEventsPage=Kt,s.Checkpoints=Pn,s.FineTuningJobCheckpointsPage=br})(Mn||(Mn={}));class Fn extends Re{constructor(){super(...arguments),this.jobs=new Mn(this._client)}}(function(s){s.Jobs=Mn,s.FineTuningJobsPage=Kn,s.FineTuningJobEventsPage=Kt})(Fn||(Fn={}));class jn extends Re{create(e,t){return this._client.post("/assistants",S(g({body:e},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}retrieve(e,t){return this._client.get(`/assistants/${e}`,S(g({},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}update(e,t,r){return this._client.post(`/assistants/${e}`,S(g({body:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}list(e={},t){return nt(e)?this.list({},e):this._client.getAPIList("/assistants",Qt,S(g({query:e},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}del(e,t){return this._client.delete(`/assistants/${e}`,S(g({},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}}class Qt extends ft{}(function(s){s.AssistantsPage=Qt})(jn||(jn={}));function ct(s){return typeof s.parse=="function"}class Tr{constructor(e){this.function=e.function,this.parse=e.parse,this.parameters=e.parameters,this.description=e.description,this.name=e.name}}class Nr{constructor(e){this.type="function",this.function=e}}const Ft=s=>(s==null?void 0:s.role)==="assistant",Tn=s=>(s==null?void 0:s.role)==="function",Yt=s=>(s==null?void 0:s.role)==="tool";function vr(s){return s!=null}var ht=function(s,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(s,t):a?a.value=t:e.set(s,t),t},he=function(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)},qe,Nn,ut,kt,o,c,h,f,v,n,i,u,d,m,E,x,R,z,_,N;const J=10;class P{constructor(){qe.add(this),this.controller=new AbortController,Nn.set(this,void 0),ut.set(this,()=>{}),kt.set(this,()=>{}),o.set(this,void 0),c.set(this,()=>{}),h.set(this,()=>{}),f.set(this,{}),this._chatCompletions=[],this.messages=[],v.set(this,!1),n.set(this,!1),i.set(this,!1),u.set(this,!1),z.set(this,e=>{if(ht(this,n,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ge),e instanceof Ge)return ht(this,i,!0,"f"),this._emit("abort",e);if(e instanceof ge)return this._emit("error",e);if(e instanceof Error){const t=new ge(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new ge(String(e)))}),ht(this,Nn,new Promise((e,t)=>{ht(this,ut,e,"f"),ht(this,kt,t,"f")}),"f"),ht(this,o,new Promise((e,t)=>{ht(this,c,e,"f"),ht(this,h,t,"f")}),"f"),he(this,Nn,"f").catch(()=>{}),he(this,o,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},he(this,z,"f"))},0)}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Tn(e)||Yt(e))&&e.content)this._emit("functionCallResult",e.content);else if(Ft(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Ft(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}_connected(){this.ended||(he(this,ut,"f").call(this),this._emit("connect"))}get ended(){return he(this,v,"f")}get errored(){return he(this,n,"f")}get aborted(){return he(this,i,"f")}abort(){this.controller.abort()}on(e,t){return(he(this,f,"f")[e]||(he(this,f,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=he(this,f,"f")[e];if(!r)return this;const a=r.findIndex(l=>l.listener===t);return a>=0&&r.splice(a,1),this}once(e,t){return(he(this,f,"f")[e]||(he(this,f,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{ht(this,u,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}done(){return G(this,null,function*(){ht(this,u,!0,"f"),yield he(this,o,"f")})}finalChatCompletion(){return G(this,null,function*(){yield this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ge("stream ended without producing a ChatCompletion");return e})}finalContent(){return G(this,null,function*(){return yield this.done(),he(this,qe,"m",d).call(this)})}finalMessage(){return G(this,null,function*(){return yield this.done(),he(this,qe,"m",m).call(this)})}finalFunctionCall(){return G(this,null,function*(){return yield this.done(),he(this,qe,"m",E).call(this)})}finalFunctionCallResult(){return G(this,null,function*(){return yield this.done(),he(this,qe,"m",x).call(this)})}totalUsage(){return G(this,null,function*(){return yield this.done(),he(this,qe,"m",R).call(this)})}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...t){if(he(this,v,"f"))return;e==="end"&&(ht(this,v,!0,"f"),he(this,c,"f").call(this));const r=he(this,f,"f")[e];if(r&&(he(this,f,"f")[e]=r.filter(a=>!a.once),r.forEach(({listener:a})=>a(...t))),e==="abort"){const a=t[0];!he(this,u,"f")&&!(r!=null&&r.length)&&Promise.reject(a),he(this,kt,"f").call(this,a),he(this,h,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=t[0];!he(this,u,"f")&&!(r!=null&&r.length)&&Promise.reject(a),he(this,kt,"f").call(this,a),he(this,h,"f").call(this,a),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=he(this,qe,"m",m).call(this);t&&this._emit("finalMessage",t);const r=he(this,qe,"m",d).call(this);r&&this._emit("finalContent",r);const a=he(this,qe,"m",E).call(this);a&&this._emit("finalFunctionCall",a);const l=he(this,qe,"m",x).call(this);l!=null&&this._emit("finalFunctionCallResult",l),this._chatCompletions.some(y=>y.usage)&&this._emit("totalUsage",he(this,qe,"m",R).call(this))}_createChatCompletion(e,t,r){return G(this,null,function*(){const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),he(this,qe,"m",_).call(this,t);const l=yield e.create(S(g({},t),{stream:!1}),S(g({},r),{signal:this.controller.signal}));return this._connected(),this._addChatCompletion(l)})}_runChatCompletion(e,t,r){return G(this,null,function*(){for(const a of t.messages)this._addMessage(a,!1);return yield this._createChatCompletion(e,t,r)})}_runFunctions(e,t,r){return G(this,null,function*(){var Ze;const a="function",xe=t,{function_call:l="auto",stream:y}=xe,Z=ot(xe,["function_call","stream"]),q=typeof l!="string"&&(l==null?void 0:l.name),{maxChatCompletions:le=J}=r||{},X={};for(const Ee of t.functions)X[Ee.name||Ee.function.name]=Ee;const se=t.functions.map(Ee=>({name:Ee.name||Ee.function.name,parameters:Ee.parameters,description:Ee.description}));for(const Ee of t.messages)this._addMessage(Ee,!1);for(let Ee=0;Ee<le;++Ee){const bt=(Ze=(yield this._createChatCompletion(e,S(g({},Z),{function_call:l,functions:se,messages:[...this.messages]}),r)).choices[0])==null?void 0:Ze.message;if(!bt)throw new ge("missing message in ChatCompletion response");if(!bt.function_call)return;const{name:ze,arguments:ke}=bt.function_call,Qe=X[ze];if(Qe){if(q&&q!==ze){const it=`Invalid function_call: ${JSON.stringify(ze)}. ${JSON.stringify(q)} requested. Please try again`;this._addMessage({role:a,name:ze,content:it});continue}}else{const it=`Invalid function_call: ${JSON.stringify(ze)}. Available options are: ${se.map(en=>JSON.stringify(en.name)).join(", ")}. Please try again`;this._addMessage({role:a,name:ze,content:it});continue}let St;try{St=ct(Qe)?yield Qe.parse(ke):ke}catch(it){this._addMessage({role:a,name:ze,content:it instanceof Error?it.message:String(it)});continue}const xt=yield Qe.function(St,this),rt=he(this,qe,"m",N).call(this,xt);if(this._addMessage({role:a,name:ze,content:rt}),q)return}})}_runTools(e,t,r){return G(this,null,function*(){var Ze,Ee;const a="tool",xe=t,{tool_choice:l="auto",stream:y}=xe,Z=ot(xe,["tool_choice","stream"]),q=typeof l!="string"&&((Ze=l==null?void 0:l.function)==null?void 0:Ze.name),{maxChatCompletions:le=J}=r||{},X={};for(const $e of t.tools)$e.type==="function"&&(X[$e.function.name||$e.function.function.name]=$e.function);const se="tools"in t?t.tools.map($e=>$e.type==="function"?{type:"function",function:{name:$e.function.name||$e.function.function.name,parameters:$e.function.parameters,description:$e.function.description}}:$e):void 0;for(const $e of t.messages)this._addMessage($e,!1);for(let $e=0;$e<le;++$e){const ze=(Ee=(yield this._createChatCompletion(e,S(g({},Z),{tool_choice:l,tools:se,messages:[...this.messages]}),r)).choices[0])==null?void 0:Ee.message;if(!ze)throw new ge("missing message in ChatCompletion response");if(!ze.tool_calls)return;for(const ke of ze.tool_calls){if(ke.type!=="function")continue;const Qe=ke.id,{name:St,arguments:xt}=ke.function,rt=X[St];if(rt){if(q&&q!==St){const Ot=`Invalid tool_call: ${JSON.stringify(St)}. ${JSON.stringify(q)} requested. Please try again`;this._addMessage({role:a,tool_call_id:Qe,content:Ot});continue}}else{const Ot=`Invalid tool_call: ${JSON.stringify(St)}. Available options are: ${se.map($t=>JSON.stringify($t.function.name)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:Qe,content:Ot});continue}let it;try{it=ct(rt)?yield rt.parse(xt):xt}catch(Ot){const $t=Ot instanceof Error?Ot.message:String(Ot);this._addMessage({role:a,tool_call_id:Qe,content:$t});continue}const en=yield rt.function(it,this),je=he(this,qe,"m",N).call(this,en);if(this._addMessage({role:a,tool_call_id:Qe,content:je}),q)return}}})}}Nn=new WeakMap,ut=new WeakMap,kt=new WeakMap,o=new WeakMap,c=new WeakMap,h=new WeakMap,f=new WeakMap,v=new WeakMap,n=new WeakMap,i=new WeakMap,u=new WeakMap,z=new WeakMap,qe=new WeakSet,d=function(){var e;return(e=he(this,qe,"m",m).call(this).content)!=null?e:null},m=function(){var r;let e=this.messages.length;for(;e-- >0;){const a=this.messages[e];if(Ft(a)){const t=a,{function_call:l}=t,y=ot(t,["function_call"]),Z=S(g({},y),{content:(r=a.content)!=null?r:null});return l&&(Z.function_call=l),Z}}throw new ge("stream ended without producing a ChatCompletionMessage with role=assistant")},E=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const a=this.messages[r];if(Ft(a)&&(a!=null&&a.function_call))return a.function_call;if(Ft(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(t=a.tool_calls.at(-1))==null?void 0:t.function}},x=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Tn(t)&&t.content!=null||Yt(t)&&t.content!=null&&this.messages.some(r=>{var a;return r.role==="assistant"&&((a=r.tool_calls)==null?void 0:a.some(l=>l.type==="function"&&l.id===t.tool_call_id))}))return t.content}},R=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},_=function(e){if(e.n!=null&&e.n>1)throw new ge("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},N=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Q extends P{static runFunctions(e,t,r){const a=new Q,l=S(g({},r),{headers:S(g({},r==null?void 0:r.headers),{"X-Stainless-Helper-Method":"runFunctions"})});return a._run(()=>a._runFunctions(e,t,l)),a}static runTools(e,t,r){const a=new Q,l=S(g({},r),{headers:S(g({},r==null?void 0:r.headers),{"X-Stainless-Helper-Method":"runTools"})});return a._run(()=>a._runTools(e,t,l)),a}_addMessage(e){super._addMessage(e),Ft(e)&&e.content&&this._emit("content",e.content)}}var C=function(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)},U=function(s,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(s,t):a?a.value=t:e.set(s,t),t},H,T,te,I,D,j;class B extends P{constructor(){super(...arguments),H.add(this),T.set(this,void 0)}get currentChatCompletionSnapshot(){return C(this,T,"f")}static fromReadableStream(e){const t=new B;return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const a=new B;return a._run(()=>a._runChatCompletion(e,S(g({},t),{stream:!0}),S(g({},r),{headers:S(g({},r==null?void 0:r.headers),{"X-Stainless-Helper-Method":"stream"})}))),a}_createChatCompletion(e,t,r){return G(this,null,function*(){var X;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),C(this,H,"m",te).call(this);const l=yield e.create(S(g({},t),{stream:!0}),S(g({},r),{signal:this.controller.signal}));this._connected();try{for(var y=mt(l),Z,q,le;Z=!(q=yield y.next()).done;Z=!1){const se=q.value;C(this,H,"m",I).call(this,se)}}catch(q){le=[q]}finally{try{Z&&(q=y.return)&&(yield q.call(y))}finally{if(le)throw le[0]}}if((X=l.controller.signal)!=null&&X.aborted)throw new Ge;return this._addChatCompletion(C(this,H,"m",D).call(this))})}_fromReadableStream(e,t){return G(this,null,function*(){var X;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),C(this,H,"m",te).call(this),this._connected();const a=dt.fromReadableStream(e,this.controller);let l;try{for(var y=mt(a),Z,q,le;Z=!(q=yield y.next()).done;Z=!1){const se=q.value;l&&l!==se.id&&this._addChatCompletion(C(this,H,"m",D).call(this)),C(this,H,"m",I).call(this,se),l=se.id}}catch(q){le=[q]}finally{try{Z&&(q=y.return)&&(yield q.call(y))}finally{if(le)throw le[0]}}if((X=a.controller.signal)!=null&&X.aborted)throw new Ge;return this._addChatCompletion(C(this,H,"m",D).call(this))})}[(T=new WeakMap,H=new WeakSet,te=function(){this.ended||U(this,T,void 0,"f")},I=function(t){var y,Z,q;if(this.ended)return;const r=C(this,H,"m",j).call(this,t);this._emit("chunk",t,r);const a=(Z=(y=t.choices[0])==null?void 0:y.delta)==null?void 0:Z.content,l=(q=r.choices[0])==null?void 0:q.message;a!=null&&(l==null?void 0:l.role)==="assistant"&&(l!=null&&l.content)&&this._emit("content",a,l.content)},D=function(){if(this.ended)throw new ge("stream has ended, this shouldn't happen");const t=C(this,T,"f");if(!t)throw new ge("request ended without sending any chunks");return U(this,T,void 0,"f"),ae(t)},j=function(t){var se,Ze,Ee,$e;var r,a,l;let y=C(this,T,"f");const le=t,{choices:Z}=le,q=ot(le,["choices"]);y?Object.assign(y,q):y=U(this,T,S(g({},q),{choices:[]}),"f");for(const ke of t.choices){const Qe=ke,{delta:St,finish_reason:xt,index:rt,logprobs:it=null}=Qe,en=ot(Qe,["delta","finish_reason","index","logprobs"]);let je=y.choices[rt];if(je||(je=y.choices[rt]=g({finish_reason:xt,index:rt,message:{},logprobs:it},en)),it)if(!je.logprobs)je.logprobs=Object.assign({},it);else{const X=it,{content:Bn}=X,Kr=ot(X,["content"]);Object.assign(je.logprobs,Kr),Bn&&((se=(r=je.logprobs).content)!=null||(r.content=[]),je.logprobs.content.push(...Bn))}if(xt&&(je.finish_reason=xt),Object.assign(je,en),!St)continue;const xe=St,{content:Ot,function_call:$t,role:Ar,tool_calls:qr}=xe,Jr=ot(xe,["content","function_call","role","tool_calls"]);if(Object.assign(je.message,Jr),Ot&&(je.message.content=(je.message.content||"")+Ot),Ar&&(je.message.role=Ar),$t&&(je.message.function_call?($t.name&&(je.message.function_call.name=$t.name),$t.arguments&&((Ze=(a=je.message.function_call).arguments)!=null||(a.arguments=""),je.message.function_call.arguments+=$t.arguments)):je.message.function_call=$t),qr){je.message.tool_calls||(je.message.tool_calls=[]);for(const bt of qr){const ze=bt,{index:Bn,id:Kr,type:ds,function:tn}=ze,bs=ot(ze,["index","id","type","function"]);const Qn=(Ee=(l=je.message.tool_calls)[Bn])!=null?Ee:l[Bn]={};Object.assign(Qn,bs),Kr&&(Qn.id=Kr),ds&&(Qn.type=ds),tn&&(($e=Qn.function)!=null||(Qn.function={arguments:""})),tn!=null&&tn.name&&(Qn.function.name=tn.name),tn!=null&&tn.arguments&&(Qn.function.arguments+=tn.arguments)}}}return y},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",a=>{const l=t.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),this.on("error",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),{next:()=>G(this,null,function*(){return e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,y)=>t.push({resolve:l,reject:y})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0})}),return:()=>G(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}toReadableStream(){return new dt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function ae(s){const Z=s,{id:e,choices:t,created:r,model:a,system_fingerprint:l}=Z,y=ot(Z,["id","choices","created","model","system_fingerprint"]);return g(S(g({},y),{id:e,choices:t.map(Ze=>{var Ee=Ze,{message:q,finish_reason:le,index:X,logprobs:se}=Ee,xe=ot(Ee,["message","finish_reason","index","logprobs"]);if(!le)throw new ge(`missing finish_reason for choice ${X}`);const St=q,{content:$e=null,function_call:bt,tool_calls:ze}=St,ke=ot(St,["content","function_call","tool_calls"]),Qe=q.role;if(!Qe)throw new ge(`missing role for choice ${X}`);if(bt){const{arguments:xt,name:rt}=bt;if(xt==null)throw new ge(`missing function_call.arguments for choice ${X}`);if(!rt)throw new ge(`missing function_call.name for choice ${X}`);return S(g({},xe),{message:{content:$e,function_call:{arguments:xt,name:rt},role:Qe},finish_reason:le,index:X,logprobs:se})}return ze?S(g({},xe),{index:X,finish_reason:le,logprobs:se,message:S(g({},ke),{role:Qe,content:$e,tool_calls:ze.map((xt,rt)=>{const Jr=xt,{function:it,type:en,id:je}=Jr,Ot=ot(Jr,["function","type","id"]),Bn=it||{},{arguments:$t,name:Ar}=Bn,qr=ot(Bn,["arguments","name"]);if(je==null)throw new ge(`missing choices[${X}].tool_calls[${rt}].id
${M(s)}`);if(en==null)throw new ge(`missing choices[${X}].tool_calls[${rt}].type
${M(s)}`);if(Ar==null)throw new ge(`missing choices[${X}].tool_calls[${rt}].function.name
${M(s)}`);if($t==null)throw new ge(`missing choices[${X}].tool_calls[${rt}].function.arguments
${M(s)}`);return S(g({},Ot),{id:je,type:en,function:S(g({},qr),{name:Ar,arguments:$t})})})})}):S(g({},xe),{message:S(g({},ke),{content:$e,role:Qe}),finish_reason:le,index:X,logprobs:se})}),created:r,model:a,object:"chat.completion"}),l?{system_fingerprint:l}:{})}function M(s){return JSON.stringify(s)}class A extends B{static fromReadableStream(e){const t=new A;return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const a=new A,l=S(g({},r),{headers:S(g({},r==null?void 0:r.headers),{"X-Stainless-Helper-Method":"runFunctions"})});return a._run(()=>a._runFunctions(e,t,l)),a}static runTools(e,t,r){const a=new A,l=S(g({},r),{headers:S(g({},r==null?void 0:r.headers),{"X-Stainless-Helper-Method":"runTools"})});return a._run(()=>a._runTools(e,t,l)),a}}class re extends Re{runFunctions(e,t){return e.stream?A.runFunctions(this._client.chat.completions,e,t):Q.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?A.runTools(this._client.chat.completions,e,t):Q.runTools(this._client.chat.completions,e,t)}stream(e,t){return B.createChatCompletion(this._client.chat.completions,e,t)}}class ie extends Re{constructor(){super(...arguments),this.completions=new re(this._client)}}(function(s){s.Completions=re})(ie||(ie={}));var $=function(s,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(s,t):a?a.value=t:e.set(s,t),t},K=function(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)},L,ce,oe,me,de,pe,Y,O,W,V,ne,k;class ee{constructor(){this.controller=new AbortController,L.set(this,void 0),ce.set(this,()=>{}),oe.set(this,()=>{}),me.set(this,void 0),de.set(this,()=>{}),pe.set(this,()=>{}),Y.set(this,{}),O.set(this,!1),W.set(this,!1),V.set(this,!1),ne.set(this,!1),k.set(this,e=>{if($(this,W,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ge),e instanceof Ge)return $(this,V,!0,"f"),this._emit("abort",e);if(e instanceof ge)return this._emit("error",e);if(e instanceof Error){const t=new ge(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new ge(String(e)))}),$(this,L,new Promise((e,t)=>{$(this,ce,e,"f"),$(this,oe,t,"f")}),"f"),$(this,me,new Promise((e,t)=>{$(this,de,e,"f"),$(this,pe,t,"f")}),"f"),K(this,L,"f").catch(()=>{}),K(this,me,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emit("end")},K(this,k,"f"))},0)}_addRun(e){return e}_connected(){this.ended||(K(this,ce,"f").call(this),this._emit("connect"))}get ended(){return K(this,O,"f")}get errored(){return K(this,W,"f")}get aborted(){return K(this,V,"f")}abort(){this.controller.abort()}on(e,t){return(K(this,Y,"f")[e]||(K(this,Y,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=K(this,Y,"f")[e];if(!r)return this;const a=r.findIndex(l=>l.listener===t);return a>=0&&r.splice(a,1),this}once(e,t){return(K(this,Y,"f")[e]||(K(this,Y,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{$(this,ne,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}done(){return G(this,null,function*(){$(this,ne,!0,"f"),yield K(this,me,"f")})}_emit(e,...t){if(K(this,O,"f"))return;e==="end"&&($(this,O,!0,"f"),K(this,de,"f").call(this));const r=K(this,Y,"f")[e];if(r&&(K(this,Y,"f")[e]=r.filter(a=>!a.once),r.forEach(({listener:a})=>a(...t))),e==="abort"){const a=t[0];!K(this,ne,"f")&&!(r!=null&&r.length)&&Promise.reject(a),K(this,oe,"f").call(this,a),K(this,pe,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=t[0];!K(this,ne,"f")&&!(r!=null&&r.length)&&Promise.reject(a),K(this,oe,"f").call(this,a),K(this,pe,"f").call(this,a),this._emit("end")}}_threadAssistantStream(e,t,r){return G(this,null,function*(){return yield this._createThreadAssistantStream(t,e,r)})}_runAssistantStream(e,t,r,a){return G(this,null,function*(){return yield this._createAssistantStream(t,e,r,a)})}_runToolAssistantStream(e,t,r,a,l){return G(this,null,function*(){return yield this._createToolAssistantStream(r,e,t,a,l)})}_createThreadAssistantStream(e,t,r){return G(this,null,function*(){const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l=yield e.createAndRun(S(g({},t),{stream:!1}),S(g({},r),{signal:this.controller.signal}));return this._connected(),this._addRun(l)})}_createToolAssistantStream(e,t,r,a,l){return G(this,null,function*(){const y=l==null?void 0:l.signal;y&&(y.aborted&&this.controller.abort(),y.addEventListener("abort",()=>this.controller.abort()));const Z=yield e.submitToolOutputs(t,r,S(g({},a),{stream:!1}),S(g({},l),{signal:this.controller.signal}));return this._connected(),this._addRun(Z)})}_createAssistantStream(e,t,r,a){return G(this,null,function*(){const l=a==null?void 0:a.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const y=yield e.create(t,S(g({},r),{stream:!1}),S(g({},a),{signal:this.controller.signal}));return this._connected(),this._addRun(y)})}}L=new WeakMap,ce=new WeakMap,oe=new WeakMap,me=new WeakMap,de=new WeakMap,pe=new WeakMap,Y=new WeakMap,O=new WeakMap,W=new WeakMap,V=new WeakMap,ne=new WeakMap,k=new WeakMap;var F=function(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)},Se=function(s,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(s,t):a?a.value=t:e.set(s,t),t},be,Ne,fe,Me,Fe,Be,_e,Ve,yt,Je,It,Ie,ve,Pe,wt,jt,pt,At,Br,zr,He,Ae;class We extends ee{constructor(){super(...arguments),be.add(this),Ne.set(this,[]),fe.set(this,{}),Me.set(this,{}),Fe.set(this,void 0),Be.set(this,void 0),_e.set(this,void 0),Ve.set(this,void 0),yt.set(this,void 0),Je.set(this,void 0),It.set(this,void 0),Ie.set(this,void 0),ve.set(this,void 0)}[(Ne=new WeakMap,fe=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Be=new WeakMap,_e=new WeakMap,Ve=new WeakMap,yt=new WeakMap,Je=new WeakMap,It=new WeakMap,Ie=new WeakMap,ve=new WeakMap,be=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",a=>{const l=t.shift();l?l.resolve(a):e.push(a)}),this.on("end",()=>{r=!0;for(const a of t)a.resolve(void 0);t.length=0}),this.on("abort",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),this.on("error",a=>{r=!0;for(const l of t)l.reject(a);t.length=0}),{next:()=>G(this,null,function*(){return e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((l,y)=>t.push({resolve:l,reject:y})).then(l=>l?{value:l,done:!1}:{value:void 0,done:!0})}),return:()=>G(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}static fromReadableStream(e){const t=new We;return t._run(()=>t._fromReadableStream(e)),t}_fromReadableStream(e,t){return G(this,null,function*(){var le;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=dt.fromReadableStream(e,this.controller);try{for(var l=mt(a),y,Z,q;y=!(Z=yield l.next()).done;y=!1){const X=Z.value;F(this,be,"m",Pe).call(this,X)}}catch(Z){q=[Z]}finally{try{y&&(Z=l.return)&&(yield Z.call(l))}finally{if(q)throw q[0]}}if((le=a.controller.signal)!=null&&le.aborted)throw new Ge;return this._addRun(F(this,be,"m",wt).call(this))})}toReadableStream(){return new dt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,a,l){const y=new We;return y._run(()=>y._runToolAssistantStream(e,t,r,a,S(g({},l),{headers:S(g({},l==null?void 0:l.headers),{"X-Stainless-Helper-Method":"stream"})}))),y}_createToolAssistantStream(e,t,r,a,l){return G(this,null,function*(){var Ze;const y=l==null?void 0:l.signal;y&&(y.aborted&&this.controller.abort(),y.addEventListener("abort",()=>this.controller.abort()));const Z=S(g({},a),{stream:!0}),q=yield e.submitToolOutputs(t,r,Z,S(g({},l),{signal:this.controller.signal}));this._connected();try{for(var le=mt(q),X,se,xe;X=!(se=yield le.next()).done;X=!1){const Ee=se.value;F(this,be,"m",Pe).call(this,Ee)}}catch(se){xe=[se]}finally{try{X&&(se=le.return)&&(yield se.call(le))}finally{if(xe)throw xe[0]}}if((Ze=q.controller.signal)!=null&&Ze.aborted)throw new Ge;return this._addRun(F(this,be,"m",wt).call(this))})}static createThreadAssistantStream(e,t,r){const a=new We;return a._run(()=>a._threadAssistantStream(e,t,S(g({},r),{headers:S(g({},r==null?void 0:r.headers),{"X-Stainless-Helper-Method":"stream"})}))),a}static createAssistantStream(e,t,r,a){const l=new We;return l._run(()=>l._runAssistantStream(e,t,r,S(g({},a),{headers:S(g({},a==null?void 0:a.headers),{"X-Stainless-Helper-Method":"stream"})}))),l}currentEvent(){return F(this,It,"f")}currentRun(){return F(this,Ie,"f")}currentMessageSnapshot(){return F(this,Fe,"f")}currentRunStepSnapshot(){return F(this,ve,"f")}finalRunSteps(){return G(this,null,function*(){return yield this.done(),Object.values(F(this,fe,"f"))})}finalMessages(){return G(this,null,function*(){return yield this.done(),Object.values(F(this,Me,"f"))})}finalRun(){return G(this,null,function*(){if(yield this.done(),!F(this,Be,"f"))throw Error("Final run was not received.");return F(this,Be,"f")})}_createThreadAssistantStream(e,t,r){return G(this,null,function*(){var se;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l=S(g({},t),{stream:!0}),y=yield e.createAndRun(l,S(g({},r),{signal:this.controller.signal}));this._connected();try{for(var Z=mt(y),q,le,X;q=!(le=yield Z.next()).done;q=!1){const xe=le.value;F(this,be,"m",Pe).call(this,xe)}}catch(le){X=[le]}finally{try{q&&(le=Z.return)&&(yield le.call(Z))}finally{if(X)throw X[0]}}if((se=y.controller.signal)!=null&&se.aborted)throw new Ge;return this._addRun(F(this,be,"m",wt).call(this))})}_createAssistantStream(e,t,r,a){return G(this,null,function*(){var xe;const l=a==null?void 0:a.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const y=S(g({},r),{stream:!0}),Z=yield e.create(t,y,S(g({},a),{signal:this.controller.signal}));this._connected();try{for(var q=mt(Z),le,X,se;le=!(X=yield q.next()).done;le=!1){const Ze=X.value;F(this,be,"m",Pe).call(this,Ze)}}catch(X){se=[X]}finally{try{le&&(X=q.return)&&(yield X.call(q))}finally{if(se)throw se[0]}}if((xe=Z.controller.signal)!=null&&xe.aborted)throw new Ge;return this._addRun(F(this,be,"m",wt).call(this))})}static accumulateDelta(e,t){for(const[r,a]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=a;continue}let l=e[r];if(l==null){e[r]=a;continue}if(r==="index"||r==="type"){e[r]=a;continue}if(typeof l=="string"&&typeof a=="string")l+=a;else if(typeof l=="number"&&typeof a=="number")l+=a;else if(pr(l)&&pr(a))l=this.accumulateDelta(l,a);else if(Array.isArray(l)&&Array.isArray(a)){if(l.every(y=>typeof y=="string"||typeof y=="number")){l.push(...a);continue}}else throw Error(`Unhandled record type: ${r}, deltaValue: ${a}, accValue: ${l}`);e[r]=l}return e}}Pe=function(e){if(!this.ended)switch(Se(this,It,e,"f"),F(this,be,"m",At).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":F(this,be,"m",Ae).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":F(this,be,"m",pt).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":F(this,be,"m",jt).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wt=function(){if(this.ended)throw new ge("stream has ended, this shouldn't happen");if(!F(this,Be,"f"))throw Error("Final run has not been received");return F(this,Be,"f")},jt=function(e){const[t,r]=F(this,be,"m",zr).call(this,e,F(this,Fe,"f"));Se(this,Fe,t,"f"),F(this,Me,"f")[t.id]=t;for(const a of r){const l=t.content[a.index];(l==null?void 0:l.type)=="text"&&this._emit("textCreated",l.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let l=a.text,y=t.content[a.index];if(y&&y.type=="text")this._emit("textDelta",l,y.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=F(this,_e,"f")){if(F(this,Ve,"f"))switch(F(this,Ve,"f").type){case"text":this._emit("textDone",F(this,Ve,"f").text,F(this,Fe,"f"));break;case"image_file":this._emit("imageFileDone",F(this,Ve,"f").image_file,F(this,Fe,"f"));break}Se(this,_e,a.index,"f")}Se(this,Ve,t.content[a.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(F(this,_e,"f")!==void 0){const a=e.data.content[F(this,_e,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,F(this,Fe,"f"));break;case"text":this._emit("textDone",a.text,F(this,Fe,"f"));break}}F(this,Fe,"f")&&this._emit("messageDone",e.data),Se(this,Fe,void 0,"f")}},pt=function(e){const t=F(this,be,"m",Br).call(this,e);switch(Se(this,ve,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const l of r.step_details.tool_calls)l.index==F(this,yt,"f")?this._emit("toolCallDelta",l,t.step_details.tool_calls[l.index]):(F(this,Je,"f")&&this._emit("toolCallDone",F(this,Je,"f")),Se(this,yt,l.index,"f"),Se(this,Je,t.step_details.tool_calls[l.index],"f"),F(this,Je,"f")&&this._emit("toolCallCreated",F(this,Je,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Se(this,ve,void 0,"f"),e.data.step_details.type=="tool_calls"&&F(this,Je,"f")&&(this._emit("toolCallDone",F(this,Je,"f")),Se(this,Je,void 0,"f")),this._emit("runStepDone",e.data,t);break;case"thread.run.step.in_progress":break}},At=function(e){F(this,Ne,"f").push(e),this._emit("event",e)},Br=function(e){switch(e.event){case"thread.run.step.created":return F(this,fe,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=F(this,fe,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const a=We.accumulateDelta(t,r.delta);F(this,fe,"f")[e.data.id]=a}return F(this,fe,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":F(this,fe,"f")[e.data.id]=e.data;break}if(F(this,fe,"f")[e.data.id])return F(this,fe,"f")[e.data.id];throw new Error("No snapshot available")},zr=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const l of a.delta.content)if(l.index in t.content){let y=t.content[l.index];t.content[l.index]=F(this,be,"m",He).call(this,l,y)}else t.content[l.index]=l,r.push(l);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},He=function(e,t){return We.accumulateDelta(t,e)},Ae=function(e){switch(Se(this,Ie,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Se(this,Be,e.data,"f"),F(this,Je,"f")&&(this._emit("toolCallDone",F(this,Je,"f")),Se(this,Je,void 0,"f"));break;case"thread.run.cancelling":break}};class Ct extends Re{create(e,t,r){return this._client.post(`/threads/${e}/messages`,S(g({body:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}update(e,t,r,a){return this._client.post(`/threads/${e}/messages/${t}`,S(g({body:r},a),{headers:g({"OpenAI-Beta":"assistants=v2"},a==null?void 0:a.headers)}))}list(e,t={},r){return nt(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,ts,S(g({query:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}}class ts extends ft{}(function(s){s.MessagesPage=ts})(Ct||(Ct={}));class Lr extends Re{retrieve(e,t,r,a){return this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,S(g({},a),{headers:g({"OpenAI-Beta":"assistants=v2"},a==null?void 0:a.headers)}))}list(e,t,r={},a){return nt(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,ns,S(g({query:r},a),{headers:g({"OpenAI-Beta":"assistants=v2"},a==null?void 0:a.headers)}))}}class ns extends ft{}(function(s){s.RunStepsPage=ns})(Lr||(Lr={}));class Wr extends Re{constructor(){super(...arguments),this.steps=new Lr(this._client)}create(e,t,r){var a;return this._client.post(`/threads/${e}/runs`,S(g({body:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers),stream:(a=t.stream)!=null?a:!1}))}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}update(e,t,r,a){return this._client.post(`/threads/${e}/runs/${t}`,S(g({body:r},a),{headers:g({"OpenAI-Beta":"assistants=v2"},a==null?void 0:a.headers)}))}list(e,t={},r){return nt(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,rs,S(g({query:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}createAndPoll(e,t,r){return G(this,null,function*(){const a=yield this.create(e,t,r);return yield this.poll(e,a.id,r)})}createAndStream(e,t,r){return We.createAssistantStream(e,this._client.beta.threads.runs,t,r)}poll(e,t,r){return G(this,null,function*(){const a=S(g({},r==null?void 0:r.headers),{"X-Stainless-Poll-Helper":"true"});for(r!=null&&r.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:y}=yield this.retrieve(e,t,S(g({},r),{headers:g(g({},r==null?void 0:r.headers),a)})).withResponse();switch(l.status){case"queued":case"in_progress":case"cancelling":let Z=5e3;if(r!=null&&r.pollIntervalMs)Z=r.pollIntervalMs;else{const q=y.headers.get("openai-poll-after-ms");if(q){const le=parseInt(q);isNaN(le)||(Z=le)}}yield Mt(Z);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return l}}})}stream(e,t,r){return We.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,a){var l;return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,S(g({body:r},a),{headers:g({"OpenAI-Beta":"assistants=v2"},a==null?void 0:a.headers),stream:(l=r.stream)!=null?l:!1}))}submitToolOutputsAndPoll(e,t,r,a){return G(this,null,function*(){const l=yield this.submitToolOutputs(e,t,r,a);return yield this.poll(e,l.id,a)})}submitToolOutputsStream(e,t,r,a){return We.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,a)}}class rs extends ft{}(function(s){s.RunsPage=rs,s.Steps=Lr,s.RunStepsPage=ns})(Wr||(Wr={}));class Dr extends Re{constructor(){super(...arguments),this.runs=new Wr(this._client),this.messages=new Ct(this._client)}create(e={},t){return nt(e)?this.create({},e):this._client.post("/threads",S(g({body:e},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}retrieve(e,t){return this._client.get(`/threads/${e}`,S(g({},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}update(e,t,r){return this._client.post(`/threads/${e}`,S(g({body:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}del(e,t){return this._client.delete(`/threads/${e}`,S(g({},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}createAndRun(e,t){var r;return this._client.post("/threads/runs",S(g({body:e},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers),stream:(r=e.stream)!=null?r:!1}))}createAndRunPoll(e,t){return G(this,null,function*(){const r=yield this.createAndRun(e,t);return yield this.runs.poll(r.thread_id,r.id,t)})}createAndRunStream(e,t){return We.createThreadAssistantStream(e,this._client.beta.threads,t)}}(function(s){s.Runs=Wr,s.RunsPage=rs,s.Messages=Ct,s.MessagesPage=ts})(Dr||(Dr={}));const gs=s=>G(this,null,function*(){const e=yield Promise.allSettled(s),t=e.filter(a=>a.status==="rejected");if(t.length){for(const a of t)console.error(a.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const a of e)a.status==="fulfilled"&&r.push(a.value);return r});class Vr extends Re{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,S(g({body:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}list(e,t={},r){return nt(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Hr,S(g({query:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}createAndPoll(e,t,r){return G(this,null,function*(){const a=yield this.create(e,t,r);return yield this.poll(e,a.id,r)})}poll(e,t,r){return G(this,null,function*(){const a=S(g({},r==null?void 0:r.headers),{"X-Stainless-Poll-Helper":"true"});for(r!=null&&r.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const l=yield this.retrieve(e,t,S(g({},r),{headers:a})).withResponse(),y=l.data;switch(y.status){case"in_progress":let Z=5e3;if(r!=null&&r.pollIntervalMs)Z=r.pollIntervalMs;else{const q=l.response.headers.get("openai-poll-after-ms");if(q){const le=parseInt(q);isNaN(le)||(Z=le)}}yield Mt(Z);break;case"failed":case"completed":return y}}})}upload(e,t,r){return G(this,null,function*(){const a=yield this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:a.id},r)})}uploadAndPoll(e,t,r){return G(this,null,function*(){const a=yield this.upload(e,t,r);return yield this.poll(e,a.id,r)})}}class Hr extends ft{}(function(s){s.VectorStoreFilesPage=Hr})(Vr||(Vr={}));class Zr extends Re{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,S(g({body:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,S(g({},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}createAndPoll(e,t,r){return G(this,null,function*(){const a=yield this.create(e,t);return yield this.poll(e,a.id,r)})}listFiles(e,t,r={},a){return nt(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Hr,S(g({query:r},a),{headers:g({"OpenAI-Beta":"assistants=v2"},a==null?void 0:a.headers)}))}poll(e,t,r){return G(this,null,function*(){const a=S(g({},r==null?void 0:r.headers),{"X-Stainless-Poll-Helper":"true"});for(r!=null&&r.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:l,response:y}=yield this.retrieve(e,t,S(g({},r),{headers:a})).withResponse();switch(l.status){case"in_progress":let Z=5e3;if(r!=null&&r.pollIntervalMs)Z=r.pollIntervalMs;else{const q=y.headers.get("openai-poll-after-ms");if(q){const le=parseInt(q);isNaN(le)||(Z=le)}}yield Mt(Z);break;case"failed":case"cancelled":case"completed":return l}}})}uploadAndPoll(l,y,Z){return G(this,arguments,function*(e,{files:t,fileIds:r=[]},a){var $e;if(t===null||t.length==0)throw new Error("No files provided to process.");const q=($e=a==null?void 0:a.maxConcurrency)!=null?$e:5,le=Math.min(q,t.length),X=this._client,se=t.values(),xe=[...r];function Ze(bt){return G(this,null,function*(){for(let ze of bt){const ke=yield X.files.create({file:ze,purpose:"assistants"},a);xe.push(ke.id)}})}const Ee=Array(le).fill(se).map(Ze);return yield gs(Ee),yield this.createAndPoll(e,{file_ids:xe})})}}Zr||(Zr={});class Xr extends Re{constructor(){super(...arguments),this.files=new Vr(this._client),this.fileBatches=new Zr(this._client)}create(e,t){return this._client.post("/vector_stores",S(g({body:e},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,S(g({},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}update(e,t,r){return this._client.post(`/vector_stores/${e}`,S(g({body:t},r),{headers:g({"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers)}))}list(e={},t){return nt(e)?this.list({},e):this._client.getAPIList("/vector_stores",ss,S(g({query:e},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}del(e,t){return this._client.delete(`/vector_stores/${e}`,S(g({},t),{headers:g({"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers)}))}}class ss extends ft{}(function(s){s.VectorStoresPage=ss,s.Files=Vr,s.VectorStoreFilesPage=Hr,s.FileBatches=Zr})(Xr||(Xr={}));class Ur extends Re{constructor(){super(...arguments),this.vectorStores=new Xr(this._client),this.chat=new ie(this._client),this.assistants=new jn(this._client),this.threads=new Dr(this._client)}}(function(s){s.VectorStores=Xr,s.VectorStoresPage=ss,s.Chat=ie,s.Assistants=jn,s.AssistantsPage=Qt,s.Threads=Dr})(Ur||(Ur={}));class Gr extends Re{create(e,t){return this._client.post("/batches",g({body:e},t))}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return nt(e)?this.list({},e):this._client.getAPIList("/batches",as,g({query:e},t))}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class as extends ft{}(function(s){s.BatchesPage=as})(Gr||(Gr={}));var cs;class Ke extends _r{constructor(q={}){var le=q,{baseURL:e=wn("OPENAI_BASE_URL"),apiKey:t=wn("OPENAI_API_KEY"),organization:r=(y=>(y=wn("OPENAI_ORG_ID"))!=null?y:null)(),project:a=(Z=>(Z=wn("OPENAI_PROJECT_ID"))!=null?Z:null)()}=le,l=ot(le,["baseURL","apiKey","organization","project"]);var se;if(t===void 0)throw new ge("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const X=S(g({apiKey:t,organization:r,project:a},l),{baseURL:e||"https://api.openai.com/v1"});if(!X.dangerouslyAllowBrowser&&gr())throw new ge(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:X.baseURL,timeout:(se=X.timeout)!=null?se:6e5,httpAgent:X.httpAgent,maxRetries:X.maxRetries,fetch:X.fetch}),this.completions=new Cn(this),this.chat=new xn(this),this.embeddings=new $n(this),this.files=new En(this),this.images=new Gn(this),this.audio=new _n(this),this.moderations=new qn(this),this.models=new Jt(this),this.fineTuning=new Fn(this),this.beta=new Ur(this),this.batches=new Gr(this),this._options=X,this.apiKey=t,this.organization=r,this.project=a}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return g(S(g({},super.defaultHeaders(e)),{"OpenAI-Organization":this.organization,"OpenAI-Project":this.project}),this._options.defaultHeaders)}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}cs=Ke,Ke.OpenAI=cs,Ke.OpenAIError=ge,Ke.APIError=Le,Ke.APIConnectionError=Wt,Ke.APIConnectionTimeoutError=Ye,Ke.APIUserAbortError=Ge,Ke.NotFoundError=an,Ke.ConflictError=Dt,Ke.RateLimitError=on,Ke.BadRequestError=sn,Ke.AuthenticationError=zn,Ke.InternalServerError=Vt,Ke.PermissionDeniedError=nr,Ke.UnprocessableEntityError=Nt,Ke.toFile=ln,Ke.fileFromPath=_t;const{OpenAIError:xs,APIError:$s,APIConnectionError:Es,APIConnectionTimeoutError:Rs,APIUserAbortError:Is,NotFoundError:As,ConflictError:Os,RateLimitError:_s,BadRequestError:Ps,AuthenticationError:Ms,InternalServerError:Fs,PermissionDeniedError:js,UnprocessableEntityError:Ts}=p;var Ns=ln,Bs=_t;(function(s){s.Page=Un,s.CursorPage=ft,s.Completions=Cn,s.Chat=xn,s.Embeddings=$n,s.Files=En,s.FileObjectsPage=Rn,s.Images=Gn,s.Audio=_n,s.Moderations=qn,s.Models=Jt,s.ModelsPage=Jn,s.FineTuning=Fn,s.Beta=Ur,s.Batches=Gr,s.BatchesPage=as})(Ke||(Ke={}));class is extends null{constructor(le={}){var X=le,{baseURL:e=Core.readEnv("OPENAI_BASE_URL"),apiKey:t=Core.readEnv("AZURE_OPENAI_API_KEY"),apiVersion:r=Core.readEnv("OPENAI_API_VERSION"),endpoint:a,deployment:l,azureADTokenProvider:y,dangerouslyAllowBrowser:Z}=X,q=ot(X,["baseURL","apiKey","apiVersion","endpoint","deployment","azureADTokenProvider","dangerouslyAllowBrowser"]);if(!r)throw new Errors.OpenAIError("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if(typeof y=="function"&&(Z=!0),!y&&!t)throw new Errors.OpenAIError("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(y&&t)throw new Errors.OpenAIError("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(t!=null||(t=us),q.defaultQuery=S(g({},q.defaultQuery),{"api-version":r}),e){if(a)throw new Errors.OpenAIError("baseURL and endpoint are mutually exclusive")}else{if(a||(a={NODE_ENV:"production",PUBLIC_PATH:"/"}.AZURE_OPENAI_ENDPOINT),!a)throw new Errors.OpenAIError("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${a}/openai`}super(g(g({apiKey:t,baseURL:e},q),Z!==void 0?{dangerouslyAllowBrowser:Z}:{})),this.apiVersion="",this._azureADTokenProvider=y,this.apiVersion=r,this._deployment=l}buildRequest(e){if(ps.has(e.path)&&e.method==="post"&&e.body!==void 0){if(!Core.isObj(e.body))throw new Error("Expected request body to be an object");const t=this._deployment||e.body.model;delete e.body.model,t!==void 0&&!this.baseURL.includes("/deployments")&&(e.path=`/deployments/${t}${e.path}`)}return super.buildRequest(e)}_getAzureADToken(){return G(this,null,function*(){if(typeof this._azureADTokenProvider=="function"){const e=yield this._azureADTokenProvider();if(!e||typeof e!="string")throw new Errors.OpenAIError(`Expected 'azureADTokenProvider' argument to return a string but it returned ${e}`);return e}})}authHeaders(e){return{}}prepareOptions(e){return G(this,null,function*(){var r,a,l;if((r=e.headers)!=null&&r.Authorization||(a=e.headers)!=null&&a["api-key"])return ls(is.prototype,this,"prepareOptions").call(this,e);const t=yield this._getAzureADToken();if((l=e.headers)!=null||(e.headers={}),t)e.headers.Authorization=`Bearer ${t}`;else if(this.apiKey!==us)e.headers["api-key"]=this.apiKey;else throw new Errors.OpenAIError("Unable to handle auth");return ls(is.prototype,this,"prepareOptions").call(this,e)})}}const ps=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations"]),us="<Missing Key>";var zs=null}}]);
}());